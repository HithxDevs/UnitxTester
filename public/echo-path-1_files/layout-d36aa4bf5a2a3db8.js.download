(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5108],{22630:(e,t,s)=>{"use strict";s.d(t,{B:()=>a});let a={TOP_NAV:"Top Nav",ANIMATE_IMAGE:"Image - Animate"}},26761:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});let a={VIDEO_GENERATION_SOURCE:"video_generation_source",ONBOARDING_USER_PERSONA_ANSWER:"onboarding_user_persona_answer",ONBOARDING_USER_INITIAL_GOAL:"onboarding_user_initial_goal",ONBOARDING_USER_CADENCE:"onboarding_user_cadence",ONBOARDING_USER_MEDIA_TYPE:"onboarding_user_media_type",ONBOARDING_USER_MEMBERS:"onboarding_user_members"}},54504:(e,t,s)=>{"use strict";s.d(t,{I:()=>y});var a=s(16258),l=s(38),n=s(20364),r=s(81789),i=s(74342),c=s(3711),o=s(53605),d=s(25868),u=s(87606),m=s(65304),x=s(2584),p=s(7528),h=s(70727),g=s(14588),f=s(13402),j=s(85121),v=s(75567),N=s(81905),b=s(91260);let y=()=>{let e=(0,c.P)(),t=(()=>{let e=(0,u.jE)(),{vagErrorHandler:t}=(0,b._)();return(0,a.n)({mutationKey:[r.S.IMAGE_GENERATION_ASYNC],mutationFn:e=>g.d.generateImageAsync(e),onMutate:async t=>{var s;let a=null!=(s=t.metadata.placeholderUuid)?s:(0,m.g)(),l=(0,v.N)(t,a);for(let t of N.Q)e.getQueryData(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:[...l,...e.data.assets]}}:e.pages[0]?{...e,pages:[{...e.pages[0],data:{...e.pages[0].data,assets:[...l,...e.pages[0].data.assets]}},...e.pages.slice(1)]}:e);return{placeholderUuid:a}},onSuccess:(s,a,l)=>{let n=s.data.filter(e=>e.status===x.R.ERROR),r=s.data.length-n.length;for(let e=0;e<r;e++)(0,f.d)();if(n.length>0&&(null==l?void 0:l.placeholderUuid)){for(let t of N.Q)e.getQueryData(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:(0,j.z)({oldAssets:e.data.assets,placeholderUuid:l.placeholderUuid,removeAll:!1,errorCount:n.length})}}:e.pages[0]?{...e,pages:e.pages.map((e,t)=>0===t?{...e,data:{...e.data,assets:(0,j.z)({oldAssets:e.data.assets,placeholderUuid:l.placeholderUuid,removeAll:!1,errorCount:n.length})}}:e)}:e);try{(0,p.e8)(n)}catch(e){t(e)}}},onError:(t,s,a)=>{if(t instanceof h.U&&(null==a?void 0:a.placeholderUuid))for(let s of N.Q)e.getQueryData(s)&&e.setQueryData(s,e=>"data"in e?{...e,data:{...e.data,assets:(0,j.z)({oldAssets:e.data.assets,placeholderUuid:a.placeholderUuid,errorCount:t.data.length,removeAll:!0})}}:e.pages[0]?{...e,pages:e.pages.map((e,s)=>0===s?{...e,data:{...e.data,assets:(0,j.z)({oldAssets:e.data.assets,placeholderUuid:a.placeholderUuid,errorCount:t.data.length,removeAll:!0})}}:e)}:e)}})})(),{data:s}=(0,d.rH)(),y=null==s?void 0:s.pages.flatMap(e=>{let{data:{assets:t}}=e;return t}),{isLegacyUser:I,activeStripePlanName:w}=(0,o.c)();return(0,a.n)({mutationKey:[r.S.IMAGE_GENERATION_ASYNC],mutationFn:async s=>{var a,r;let c=(null!=(a=null==y?void 0:y.filter(e=>(e.code===l.WX.PENDING||e.code===l.WX.PROCESSING)&&e.service===n.z1.IMAGE))?a:[]).length,o=I?8:null!=(r=null==e?void 0:e.image)?r:4;if(c+s.count>o)throw new i.h("Current plan limits ".concat(o," concurrent generations. ").concat("Unlimited"===w?"":"Upgrade to increase."));return await t.mutateAsync(s)}})}},71930:(e,t,s)=>{"use strict";s.d(t,{C:()=>a});let a={IMAGINE_ONE:"Imagine One"}},75567:(e,t,s)=>{"use strict";s.d(t,{N:()=>m,i:()=>x});var a=s(223),l=s.n(a),n=s(65304),r=s(38),i=s(21520),c=s(98357),o=s(20364),d=s(1227),u=s(71874);let m=(e,t)=>Array.from({length:e.count}).map(()=>(0,d.r_)((0,i.OK)({batch_id:t,category:r.em.IMAGE,code:r.WX.PENDING,created_at:l()().toISOString(),updated_at:l()().toISOString(),service:o.z1.IMAGE,endpoint:c.X.GENERATE_IMAGE_ASYNC,id:-1,is_public:!1,status:r.wQ.PENDING,style_id:e.styleId,title:"Untitled",url:{generation:[],inputs:e.images.map(e=>URL.createObjectURL(e)),thumbnail:[]},uuid:(0,n.g)(),settings:{clientVersion:"1",metadata:JSON.stringify({placeholderUuid:t,promptWithoutManipulation:e.metadata.promptWithoutManipulation,presetId:e.metadata.presetId}),prompt:e.prompt,aspect_ratio:e.aspectRatio,style_id:"".concat(e.styleId),is_enhance:e.isEnhance?"1":"0",enhancer_id:e.enhancerId,count:"".concat(e.count)}}))),x=(e,t)=>Array.from({length:1}).map(()=>(0,u.Cf)((0,i.OK)({batch_id:t,category:r.em.IMAGE,code:r.WX.PENDING,created_at:l()().toISOString(),updated_at:l()().toISOString(),service:o.z1.IMAGE,endpoint:c.X.UPSCALE_IMAGE_ASYNC,id:-1,is_public:!1,status:r.wQ.PENDING,style_id:e.styleId,title:"Untitled",url:{generation:[],inputs:[URL.createObjectURL(e.image)],thumbnail:[]},uuid:(0,n.g)(),settings:{style_id:"".concat(e.styleId),clientVersion:"1",metadata:JSON.stringify({placeholderUuid:t,createdFromSettings:e.metadata.createdFromSettings,promptWithoutManipulation:e.metadata.promptWithoutManipulation})}})))},79501:(e,t,s)=>{"use strict";s.d(t,{t:()=>r});var a=s(7620),l=s(20844);let n={[l.z.HOME]:"Imagine One Home",[l.z.IMAGE]:"Imagine One Image",[l.z.VIDEO]:"Imagine One Video"},r=()=>({computeToolNameForAnalytics:(0,a.useCallback)(()=>{var e;return null!=(e=n[window.location.pathname])?e:window.location.pathname},[])})},81905:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r});var a=s(20364),l=s(25868),n=s(59761);let r=[[s(90416).n.IMAGE_ASSETS],(0,l.ld)(),(0,l.ld)([a.z1.IMAGE]),[n.e.INFINITE,...(0,l.ld)()],[n.e.INFINITE,...(0,l.ld)([a.z1.IMAGE])]]},82314:(e,t,s)=>{"use strict";s.d(t,{M5:()=>u,SQ:()=>m,_2:()=>x,lp:()=>p,lv:()=>o,mv:()=>d,rI:()=>c});var a=s(54568),l=s(26631),n=s(71140),r=s(11386),i=s(89536);let c=l.bL;l.YJ,l.ZL;let o=l.Pb;l.z6;let d=e=>{let{className:t}=e;return(0,a.jsx)(n.D3D,{className:(0,r.cn)("text-content-primary size-5 transform stroke-[1.5] transition-all duration-500 group-data-[state=open]:-rotate-180 [.sm_&]:size-[18px]",t)})},u=e=>{let{variant:t,size:s,className:n,...c}=e;return(0,a.jsx)(l.G5,{className:(0,r.cn)((0,i.Kb)({className:n,variant:t,size:s}),n),...c})},m=e=>{let{className:t,variant:s,size:n,sideOffset:c=4,...o}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{sideOffset:c,className:(0,r.cn)((0,i.Kb)({className:t,size:n,variant:s})),...o})})},x=e=>{let{className:t,variant:s,size:n,inset:c,...o}=e;return(0,a.jsx)(l.q7,{className:(0,r.cn)((0,i.OZ)({className:t,variant:s,size:n}),c&&"pl-8"),...o})},p=e=>{let{className:t,inset:s,...n}=e;return(0,a.jsx)(l.JU,{className:(0,r.cn)("px-2 py-1.5 text-sm font-medium",s&&"pl-8",t),...n})}},84184:(e,t,s)=>{Promise.resolve().then(s.bind(s,88660))},88660:(e,t,s)=>{"use strict";s.d(t,{EditorLayout:()=>sp});var a=s(54568),l=s(7620),n=s(12522),r=s(60357),i=s(60095),c=s(75889);let o={GRID:"grid",LIST:"list"};var d=s(91326),u=s(35313);let m=(0,d.v)((0,u.Zr)(e=>({view:o.LIST,setView:t=>e({view:t})}),{name:"editor-view-store"}));var x=s(32562),p=s(38),h=s(81491),g=s(49488),f=s(25868),j=s(20364);let v={ALL:"all",IMAGE:"image",VIDEO:"video"},N={[v.ALL]:[j.z1.IMAGE,j.z1.VIDEO],[v.IMAGE]:[j.z1.IMAGE],[v.VIDEO]:[j.z1.VIDEO]},b=(0,d.v)(e=>({filter:v.ALL,setFilter:t=>e({filter:t})})),y=(0,l.createContext)(null),I=e=>{let{children:t}=e,{filter:s}=b(),n=(0,f.bj)(N[s]);(0,x.X)({containerId:h.G.EDITOR_SCROLL_LAYOUT,fetchNextPage:n.fetchNextPage,hasNextPage:!!n.hasNextPage,isFetchingNextPage:n.isFetchingNextPage,threshold:.7});let r=n.data.pages.flatMap(e=>{let{data:{assets:t}}=e;return t}).filter(e=>e.status!==p.wQ.FAILED),i=(0,g.S)(r),c=(0,l.useMemo)(()=>i.flatMap(e=>{let{assets:t}=e;return t}),[i]),o=(0,l.useMemo)(()=>c.reduce((e,t,s)=>(e[t.uuid]=s,e),{}),[c]);return(0,a.jsx)(y.Provider,{value:{flattenedAssets:c,assetBatches:i,uuidToFlattenedAssetsIndexMap:o},children:t})},w=()=>{let e=(0,l.useContext)(y);if(!e)throw Error("useEditorViewContext must be used within a EditorViewProvider");return e};var E=s(25173),A=s(223),_=s.n(A),C=s(38879),z=s(61773),k=s(62942),O=s(60799),S=s(71140),G=s(54140),T=s(33029),R=s(75036),V=s(53513),M=s(11386),D=s(38373),U=s(20844),P=s(51874),L=s(10797),$=s(11052),Q=s(42547),F=s(96450),B=s(17233),Y=s(71930),J=s(2899),Z=s(18010),X=s(22360),K=s(79501),W=s(17685),H=s(54388),q=s(99588),ee=s(53952);let et=e=>{let{user:t}=(0,i.u)(),{isVariated:s,isUpscaled:a,prompt:n}=(0,$.J)(e),{fireDownloadImageAssetEvent:r}=(()=>{let{data:e}=(0,W.k)(),{aggregator:t}=(0,q.p)(),{computeUserAnalyticsInfo:s}=(0,H.U)(),{computeToolNameForAnalytics:a}=(0,K.t)(),n=(0,ee.I)();return{fireDownloadImageAssetEvent:(0,l.useCallback)(l=>{let{page:r,source:i,userStatus:c,userPlan:o,userPlanPeriod:d,email:u,id:m}=s(),x=Number(localStorage.getItem(X.C.GEN_TILL_EXPORT)),p=a(),{model:h,prompt:g}=n(l),f=(0,J.$)(g);t.log(Z.M.export.withProperties({export_all:!1,page_name:r,total_images_exported:1,user_account_status:c,user_plan:o,user_plan_period:d,feature:r,email:u,distinct_id:m,source:i,tokens_remaining:null==e?void 0:e.total,gen_till_export:x,model_used:null==h?void 0:h.name,prompt_text:f.promptText1,prompt_text_2:f.promptText2,prompt_text_3:f.promptText3,tool_name:p,studio_name:Y.C.IMAGINE_ONE,app_name:Y.C.IMAGINE_ONE})),localStorage.removeItem(X.C.GEN_TILL_EXPORT)},[s,a,n,t,null==e?void 0:e.total])}})(),{download:c,...o}=(0,B.Nh)(),d=(0,F.Q)(async()=>{try{let l=e.url.generation;c(l,"".concat((0,Q.w)({name:[null==t?void 0:t.name,n,e.uuid],isUpscaled:a,isVariation:s}),".png"),0),r(e)}catch(e){(0,L.v)(e),e instanceof Error?P.oR.error(e.message):P.oR.error("An error occurred while downloading image")}});return{download:(0,l.useCallback)(()=>d.current(),[d]),...o}};var es=s(91260),ea=s(6737),el=s(65304),en=s(88796),er=s(3397),ei=s(54504),ec=s(2584),eo=s(22625),ed=s(22282),eu=s(61744),em=s(94290);let ex=()=>{let e=(()=>{let e=(0,ee.I)(),{defaultSetting:t}=(0,er.bO)(),{imageVariate:{pluginName:s,modelId:a}}=t;return(0,l.useCallback)(async t=>{let{aspectRatio:l,count:n,preset:r,prompt:i}=e(t),c=await (0,ea.je)(t.url.generation),o=(0,el.g)(),d=[i];(null==r?void 0:r.prompt)&&d.push(r.prompt);let u=d.join(", ");return{base:t.uuid,aspectRatio:l,count:n,images:[c],metadata:{placeholderUuid:o,promptWithoutManipulation:i,presetId:r?"".concat(r.id):void 0},prompt:u,variation:en.Ej.IMAGE_TO_IMAGE,pluginName:s,styleId:a,enhancerId:void 0,isEnhance:void 0}},[s,e,a])})(),{vagErrorHandler:t}=(0,es._)(),{fireImageVariateEvent:s}=(()=>{let{aggregator:e}=(0,q.p)(),{computeUserAnalyticsInfo:t}=(0,H.U)(),{data:s}=(0,W.k)(),a=(0,ee.I)();return{fireImageVariateEvent:l=>{var n,r;let{error:i,asset:c,generateImageAsyncDTO:o}=l,{page:d,userStatus:u,userPlan:m,userPlanPeriod:x,source:p,id:h,email:g}=t(),f=o?o.reduce((e,t)=>{var s;return t.status===ec.R.SUCCESS?e+(null!=(s=t.cost)?s:0):e},0):0,j=null!=(n=null==s?void 0:s.total)?n:0,{aspectRatio:v,preset:N,model:b,count:y,prompt:I}=a(c),w=(0,J.$)(I),E={upload_image:c.url.inputs.length>0,aspect_ratio:v,number_of_images:y,model_used:b.name,presets:null!=(r=null==N?void 0:N.name)?r:"",image_mode:eu.K.EDIT,prompt_text:w.promptText1,prompt_text_2:w.promptText2,prompt_text_3:w.promptText3,upscale_used:!1,variate_used:!0,upload_type:ed.Q,recreate:!1,inspiration_used:!1,page_name:d,source:p,user_account_status:u,user_plan:m,user_plan_period:x,distinct_id:h,email:g,tokens_remaining:j-f,tokens_consumed:f};null==i?e.log(Z.M.imageGenerationOne.withProperties({...E,processing_status:eo.n.SUCCESSFUL})):e.log(Z.M.imageGenerationOne.withProperties({...E,processing_status:eo.n.FAILED,processing_error:(0,em.n)(i)}))}}})(),[a,n]=(0,l.useState)(!1),r=(0,ei.I)();return{isVariating:a,handleImageVariate:async a=>{let{asset:l}=a;try{n(!0);let t=await e(l),a=await r.mutateAsync(t);s({error:null,asset:l,generateImageAsyncDTO:a.data})}catch(e){s({error:e,asset:l,generateImageAsyncDTO:null}),t(e)}finally{n(!1)}}}};var ep=s(87606),eh=s(16258),eg=s(70727),ef=s(81789),ej=s(14588),ev=s(85121),eN=s(75567),eb=s(81905);let ey=()=>{let e=(0,ep.jE)();return(0,eh.n)({mutationKey:[ef.S.IMAGE_UPSCALE],mutationFn:async e=>ej.d.upscaleImageAsync(e),onMutate:async t=>{var s;let a=null!=(s=t.metadata.placeholderUuid)?s:(0,el.g)(),l=(0,eN.i)(t,a);for(let t of eb.Q)e.getQueryData(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:[...l,...e.data.assets]}}:e.pages[0]?{...e,pages:[{...e.pages[0],data:{...e.pages[0].data,assets:[...l,...e.pages[0].data.assets]}},...e.pages.slice(1)]}:e);return{placeholderUuid:a}},onSuccess:(t,s,a)=>{let l=t.data.filter(e=>e.status===ec.R.ERROR);if(l.length>0&&(null==a?void 0:a.placeholderUuid))for(let t of eb.Q)e.getQueryData(t)&&e.setQueryData(t,e=>"data"in e?{...e,data:{...e.data,assets:(0,ev.z)({oldAssets:e.data.assets,placeholderUuid:a.placeholderUuid,removeAll:!1,errorCount:l.length})}}:e.pages[0]?{...e,pages:e.pages.map((e,t)=>0===t?{...e,data:{...e.data,assets:(0,ev.z)({oldAssets:e.data.assets,placeholderUuid:a.placeholderUuid,removeAll:!1,errorCount:l.length})}}:e)}:e)},onError:(t,s,a)=>{if(t instanceof eg.U&&(null==a?void 0:a.placeholderUuid))for(let s of eb.Q)e.getQueryData(s)&&e.setQueryData(s,e=>"data"in e?{...e,data:{...e.data,assets:(0,ev.z)({oldAssets:e.data.assets,placeholderUuid:a.placeholderUuid,errorCount:t.data.length})}}:e.pages[0]?{...e,pages:e.pages.map((e,s)=>0===s?{...e,data:{...e.data,assets:(0,ev.z)({oldAssets:e.data.assets,placeholderUuid:a.placeholderUuid,errorCount:t.data.length})}}:e)}:e)}})};var eI=s(59727);let ew=()=>{let{defaultSetting:{upscale:{modelId:e}}}=(0,er.bO)();return(0,l.useCallback)(async t=>{let s=await (0,ea.je)(t.url.generation);if(t.service!==j.z1.IMAGE)throw Error("Asset being upscaled is not an image");let a=(e=>{let t=e.tag===eI.A.IMAGE_GENERATION?e.settings:e.settings.metadata.createdFromSettings;return{clientVersion:"".concat(t.clientVersion),style_id:t.styleId,prompt:t.prompt,enhanced_prompt:t.enhancedPrompt,aspect_ratio:t.aspectRatio,is_enhance:t.isEnhance?"1":"0",enhancer_id:t.enhancerId,count:"".concat(t.count)}})(t);return{image:s,metadata:{placeholderUuid:(0,el.g)(),createdFromSettings:a,promptWithoutManipulation:a.prompt},styleId:e}},[e])};var eE=s(94472),eA=s(43252);let e_=e=>{let{user:t}=(0,i.u)(),{prompt:s}=(0,eE.x)(e),{fireDownloadVideoAssetEvent:a}=(()=>{let{data:e}=(0,W.k)(),{aggregator:t}=(0,q.p)(),{computeUserAnalyticsInfo:s}=(0,H.U)(),{computeToolNameForAnalytics:a}=(0,K.t)(),n=(0,eA.u)();return{fireDownloadVideoAssetEvent:(0,l.useCallback)(l=>{let{page:r,source:i,userStatus:c,userPlan:o,userPlanPeriod:d,email:u,id:m}=s(),x=Number(localStorage.getItem(X.C.GEN_TILL_EXPORT)),p=a(),{model:h,prompt:g}=n(l),f=(0,J.$)(g);t.log(Z.M.export.withProperties({export_all:!1,page_name:r,total_images_exported:1,user_account_status:c,user_plan:o,user_plan_period:d,feature:r,email:u,distinct_id:m,source:i,tokens_remaining:null==e?void 0:e.total,gen_till_export:x,model_used:null==h?void 0:h.name,prompt_text:f.promptText1,prompt_text_2:f.promptText2,prompt_text_3:f.promptText3,tool_name:p,studio_name:Y.C.IMAGINE_ONE,app_name:Y.C.IMAGINE_ONE})),localStorage.removeItem(X.C.GEN_TILL_EXPORT)},[s,a,n,t,null==e?void 0:e.total])}})(),{download:n,...r}=(0,B.Nh)(),c=(0,F.Q)(async()=>{try{let l=e.url.generation;n(l,"".concat((0,Q.w)({name:[null==t?void 0:t.name,s]}),".mp4"),0),a(e)}catch(e){(0,L.v)(e),e instanceof Error?P.oR.error(e.message):P.oR.error("An error occurred while downloading video")}});return{download:(0,l.useCallback)(()=>c.current(),[c]),...r}};var eC=s(66727),ez=s(49896);let ek=e=>{let{isTruncated:t,...s}=e;return(0,a.jsx)("button",{type:"button",className:"text-content-tertiary ml-1 cursor-pointer",...s,children:t?"See less":"... See more"})},eO=e=>{let{prompt:t,className:s}=e,{isTruncated:n,text:r,toggleTruncatedText:i,hasMoreText:c}=((e,t)=>{let{maxLength:s=150}={},[a,n]=(0,l.useState)(!1),r=e.slice(0,s),i=e.length!==r.length;return{isTruncated:a,toggleTruncatedText:()=>n(!a),text:a?e:r.trimEnd(),hasMoreText:i}})(t);return(0,a.jsxs)("div",{className:(0,M.cn)("text-content-primary text-body-sm max-h-[250px] overflow-y-auto",s),children:[(0,a.jsx)("span",{children:r}),c&&(0,a.jsx)(ek,{isTruncated:n,onClick:i})]})};var eS=s(45382);let eG=(0,l.createContext)(null),eT=e=>{let{children:t,asset:s}=e,l={asset:s,isUpscaled:s.tag===eI.A.IMAGE_UPSCALE,isBackgroundRemoved:s.tag===eI.A.IMAGE_REMOVE_BG,isVariated:!!s.baseId};return(0,a.jsx)(eG.Provider,{value:l,children:t})},eR=()=>{let e=(0,l.useContext)(eG);if(!e)throw Error("useEditorViewAssetContext must be used within a EditorViewAssetProvider");return e},eV=e=>{let t=(0,ee.I)(),s=(0,eA.u)();switch(null==e?void 0:e.service){case j.z1.VIDEO:return s(e);case j.z1.IMAGE:default:return t(e)}};var eM=s(40515),eD=s(26761),eU=s(22630),eP=s(25761);let eL=()=>{let{videoGenerationForm:e}=(0,eP.NT)();return{handleAnimateImageAsset:t=>{sessionStorage.setItem(eD.J.VIDEO_GENERATION_SOURCE,eU.B.ANIMATE_IMAGE),e.setValue("firstFrame",{id:(0,el.g)(),src:t.url.generation,thumbnailSrc:t.url.thumbnail}),e.setValue("lastFrame",void 0)}}};var e$=s(83922);let eQ=()=>{let[e,t]=(0,e$.ZA)("id");return{id:e,closeModal:()=>{t(null)},openModal:e=>{let{id:s}=e;t(s)}}};var eF=s(97997),eB=s(21517);let eY=()=>{let{getImageModelUsingStyleId:e}=(0,eF.QT)(),{handleImageModeSelect:t}=(0,eB.E)();return{handleUseImageModel:s=>{let a=(e=>{var t,s,a,l;return e.tag===eI.A.IMAGE_GENERATION?null==(t=e.settings)?void 0:t.styleId:e.tag===eI.A.IMAGE_UPSCALE?null==(l=e.settings)||null==(a=l.metadata)||null==(s=a.createdFromSettings)?void 0:s.styleId:void 0})(s);if(!a)return;let{mode:l,model:n}=e(a);n&&n.modelId!==eF.rz&&t(l,n.modelId)}}},eJ=()=>{let{handleUseImageModel:e}=eY(),{imageGenerationForm:t}=(0,eP.NT)(),s=(0,ee.I)();return{handleUseImagePreset:a=>{if(a.tag===eI.A.IMAGE_GENERATION){let{preset:l}=s(a);l&&(e(a),t.setValue("preset",l))}}}},eZ=()=>{let{imageGenerationForm:e}=(0,eP.NT)();return{handleUseImagePrompt:t=>{switch(t.service){case j.z1.IMAGE:t.tag===eI.A.IMAGE_GENERATION?e.setValue("prompt",t.settings.prompt):e.setValue("prompt",t.settings.metadata.createdFromSettings.prompt);break;case j.z1.VIDEO:t.tag===eI.A.VIDEO_GENERATION&&e.setValue("prompt",t.settings.prompt)}}}};var eX=s(43898);let eK=()=>{let{getVideoModelUsingStyleId:e}=(0,eF.QT)(),t=(0,eA.u)(),{handleVideoModeSelect:s}=(0,eX.Q)();return{handleUseVideoModel:a=>{let l=(e=>{if(e.tag===eI.A.VIDEO_GENERATION){var t;return null==(t=e.settings)?void 0:t.styleId}})(a);if(!l)return;let n=e(l);if(n&&n.modelId!==eF.rz){let{mode:e}=t(a);s(e,n.modelId)}}}},eW=()=>{let{handleUseVideoModel:e}=eK(),{videoGenerationForm:t}=(0,eP.NT)(),s=(0,eA.u)();return{handleUseVideoEffect:a=>{if(a.tag===eI.A.VIDEO_GENERATION){let{effect:l}=s(a);l&&(e(a),t.setValue("effect",l))}}}},eH=()=>{let{videoGenerationForm:e}=(0,eP.NT)();return{handleUseVideoPrompt:t=>{switch(t.service){case j.z1.IMAGE:t.tag===eI.A.IMAGE_GENERATION?e.setValue("prompt",t.settings.prompt):e.setValue("prompt",t.settings.metadata.createdFromSettings.prompt);break;case j.z1.VIDEO:t.tag===eI.A.VIDEO_GENERATION&&e.setValue("prompt",t.settings.prompt)}}}},eq=()=>{let e=(0,k.useRouter)(),{handleUseImagePrompt:t}=eZ(),{handleUseImagePreset:s}=eJ(),{handleUseImageSettings:a}=(()=>{let{handleUseImagePrompt:e}=eZ(),{handleUseImageModel:t}=eY(),{handleUseImageAspectRatio:s}=(()=>{let{imageGenerationForm:e}=(0,eP.NT)();return{handleUseImageAspectRatio:t=>{let s=new Set(e.getValues("model").aspectRatio),a="";a=t.tag===eI.A.IMAGE_GENERATION?t.settings.aspectRatio:t.settings.metadata.createdFromSettings.aspectRatio,s.has(a)&&e.setValue("aspectRatio",a)}}})(),{handleUseImagePreset:a}=eJ(),{handleUseImageInputImages:l}=(()=>{let{imageGenerationForm:e}=(0,eP.NT)();return{handleUseImageInputImages:t=>{switch(t.tag){case eI.A.IMAGE_UPSCALE:case eI.A.IMAGE_REMOVE_BG:case eI.A.IMAGE_GENERATION:{let s=e.getValues("model").maxImages;e.setValue("images",t.url.inputs.slice(0,s).map(e=>({id:(0,el.g)(),src:e,thumbnailSrc:e})))}}}}})();return{handleUseImageSettings:n=>{e(n),t(n),s(n),a(n),l(n)}}})(),{handleUseVideoSettings:l}=(()=>{let{handleUseVideoPrompt:e}=eH(),{handleUseVideoModel:t}=eK(),{handleUseVideoAspectRatio:s}=(()=>{let{videoGenerationForm:e}=(0,eP.NT)();return{handleUseVideoAspectRatio:t=>{let s=e.getValues("model"),a=new Set(t.url.inputs.length>0?s.i2vSupportedAspectRatios:s.t2vSupportedAspectRatios);if(t.tag===eI.A.VIDEO_GENERATION){let s=t.settings.aspectRatio;if(!a.has(s))return;e.setValue("aspectRatio",s)}}}})(),{handleUseVideoEffect:a}=eW(),{handleUseVideoInputImages:l}=(()=>{let{videoGenerationForm:e}=(0,eP.NT)();return{handleUseVideoInputImages:t=>{if(t.tag===eI.A.VIDEO_GENERATION){let s=e.getValues("model").isLastFrameSupported;t.url.inputs[0]&&e.setValue("firstFrame",{id:(0,el.g)(),src:t.url.inputs[0],thumbnailSrc:t.url.inputs[0]}),s&&t.url.inputs[1]&&e.setValue("lastFrame",{id:(0,el.g)(),src:t.url.inputs[1],thumbnailSrc:t.url.inputs[1]})}}}})();return{handleUseVideoSettings:n=>{e(n),t(n),s(n),a(n),l(n)}}})(),{handleUseVideoEffect:n}=eW(),{handleUseVideoPrompt:r}=eH();return{handleUsePrompt:e=>{switch(window.location.pathname){case U.z.IMAGE:t(e);break;case U.z.VIDEO:r(e)}},handleUseSettings:t=>{switch(t.service){case j.z1.IMAGE:window.location.pathname!==U.z.IMAGE&&setTimeout(()=>{e.push(U.z.IMAGE)},50),a(t);break;case j.z1.VIDEO:window.location.pathname!==U.z.VIDEO&&setTimeout(()=>{e.push(U.z.VIDEO)},50),l(t)}},handleUsePreset:e=>{switch(e.service){case j.z1.IMAGE:s(e);break;case j.z1.VIDEO:n(e)}}}},e0=e=>{let{src:t,alt:s}=e;return(0,a.jsx)("div",{className:"border-border-primary rounded-1.5 relative size-8 shrink-0 overflow-hidden border transition-transform not-first:-ml-1.5 odd:-rotate-8 even:rotate-8 hover:z-10 hover:scale-150 hover:rotate-0",children:(0,a.jsx)(z.default,{fill:!0,src:t,alt:s,className:"object-cover"})})},e1=e=>{let{images:t,alt:s}=e;return 0===t.length?null:(0,a.jsx)("div",{className:"flex items-center",children:t.map((e,t)=>(0,a.jsx)(e0,{src:e,alt:s},t))})},e2=e=>{let{onClickWrapper:t}=e,[s,n]=(0,l.useState)(!1),r=(0,l.useRef)(!1),{asset:i}=eR(),{aspectWidth:c,aspectHeight:o}=eV(i);return i?(0,a.jsx)(O.GT,{doubleClick:{disabled:!0},centerOnInit:!0,minScale:.98,initialScale:.98,onTransformed:(e,t)=>{let{scale:s}=t;n(.98!==s)},onPanningStop:()=>{setTimeout(()=>{r.current=!1},0)},onPanning:()=>{r.current=!0},wheel:{smoothStep:.01},limitToBounds:!0,disablePadding:!0,panning:{wheelPanning:!0},children:e=>{let{zoomIn:l,resetTransform:n}=e;return(0,a.jsx)(O.WZ,{wrapperClass:"size-full!",contentClass:"size-full! flex items-center justify-center relative cursor-zoom-out",contentProps:{onClick:()=>{t()}},children:(0,a.jsx)(C.P.button,{layoutId:"asset-".concat(i.uuid),transition:{duration:.1},type:"button","aria-label":s?"Zoom out asset":"Zoom in asset",onClick:e=>{if(e.stopPropagation(),!r.current){if(s)return void n(100);l(void 0,100)}},style:{aspectRatio:c/o,maxWidth:"min(100%,1024px)",maxHeight:"min(100%,1024px)"},className:(0,M.cn)("rounded-2 pointer-events-auto! relative isolate focus-visible:outline-none",{"cursor-zoom-in":!s,"cursor-grabbing":s}),children:(()=>{switch(i.service){case j.z1.IMAGE:return(0,a.jsx)(e8,{asset:i});case j.z1.VIDEO:return(0,a.jsx)(e4,{asset:i})}})()})})}}):null},e5=e=>{let{isOpen:t,setIsOpen:s}=e,l=()=>{s(!1)};return(0,a.jsx)(T.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(T.ZJ,{children:[(0,a.jsx)(E.hJ,{className:"fixed inset-0 z-50"}),(0,a.jsxs)(E.UC,{className:"group group fixed top-1/2 left-1/2 z-50 flex size-full -translate-x-1/2 -translate-y-1/2 items-center justify-center ring-0",children:[(0,a.jsxs)(T.c7,{className:"sr-only",children:[(0,a.jsx)(T.L3,{children:"Asset Full View Modal"}),(0,a.jsx)(T.rr,{children:"Click on the asset to zoom in"})]}),(0,a.jsx)("div",{className:"group-data-[state=open]:animate-in group-data-[state=closed]:animate-out group-data-[state=closed]:fade-out-0 group-data-[state=open]:fade-in-0 bg-surface-primary-variant/60 absolute inset-0 backdrop-blur-[25px] transition-all duration-100"}),(0,a.jsx)(e2,{onClickWrapper:l}),(0,a.jsx)(G.$,{size:"icon-sm",variant:"ghost",className:"absolute top-4 right-8",onClick:l,children:(0,a.jsx)(S.Cht,{})})]})]})})},e8=e=>{let{asset:t}=e,{enhancedPrompt:s}=(0,$.J)(t);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.default,{src:t.url.thumbnail,fill:!0,className:"bg-fill-primary laptop:rounded-2 -z-1 size-full object-cover select-none",alt:"Thumbnail for ".concat(s)}),(0,a.jsx)("img",{src:t.url.generation,className:"laptop:rounded-2 size-full object-cover select-none",alt:s},t.uuid)]})},e4=e=>{let{asset:t}=e;return(0,a.jsx)("video",{ref:e=>(e&&(e.src=t.url.generation),()=>{e&&(e.src="")}),className:"bg-fill-primary laptop:rounded-2 size-full object-cover select-none",muted:!0,autoPlay:!0,loop:!0,playsInline:!0,poster:t.url.thumbnail},t.uuid)},e3=e=>{let{asset:t}=e;switch(t.service){case j.z1.IMAGE:return(0,a.jsx)(e8,{asset:t});case j.z1.VIDEO:return(0,a.jsx)(e4,{asset:t})}},e6=e=>{let{onZoomClick:t,asset:s}=e,l=s.status===p.wQ.FINISHED,{aspectWidth:n,aspectHeight:r}=eV(s);return(0,a.jsx)(C.P.div,{layoutId:"asset-".concat(s.uuid),style:{aspectRatio:n/r,maxWidth:"min(100%,1024px)",maxHeight:"min(100%,1024px)"},className:"laptop:rounded-2 pointer-events-auto absolute inset-0 isolate m-auto",initial:!1,transition:{duration:.1},children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3,{asset:s},s.uuid),(0,a.jsx)("button",{type:"button",className:"absolute inset-0 m-auto cursor-zoom-in focus-visible:outline-none",onClick:t,children:(0,a.jsx)(G.$,{size:"icon-sm",variant:"img-hover-cta",className:"absolute top-3 right-3 cursor-zoom-in",asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(S.mSu,{})})})})]}):(0,a.jsx)(R.E,{className:"laptop:rounded-2 bg-surface-secondary isolate flex w-full animate-none items-center justify-center rounded-none",style:{aspectRatio:n/r},children:(0,a.jsx)(S.mPE,{className:"text-content-tertiary size-6 animate-spin"})})})},e7=e=>{let{onPrevious:t,onNext:s,canGoPrevious:l,canGoNext:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G.$,{variant:"ghost",size:"icon-sm",className:"laptop:left-0 tablet:inline-flex pointer-events-auto absolute inset-y-0 left-4 my-auto hidden disabled:pointer-events-auto disabled:cursor-not-allowed",disabled:!l,onClick:t,children:(0,a.jsx)(S.YJP,{})}),(0,a.jsx)(G.$,{variant:"ghost",size:"icon-sm",className:"laptop:right-0 tablet:inline-flex pointer-events-auto absolute inset-y-0 right-4 my-auto hidden disabled:pointer-events-auto disabled:cursor-not-allowed",onClick:s,disabled:!n,children:(0,a.jsx)(S.vKP,{})})]})},e9=e=>{let{currentIndex:t,totalCount:s,onIndexChange:l}=e;return(0,a.jsx)("div",{className:"tablet:hidden flex flex-col items-stretch gap-2",children:(0,a.jsx)("div",{className:"mx-auto flex max-w-14 items-center justify-start gap-1 overflow-x-hidden",children:Array.from({length:s}).map((e,n)=>(0,a.jsx)("button",{type:"button",className:"bg-fill-tertiary-disabled data-[selected=true]:bg-content-primary size-1.5 shrink-0 cursor-pointer rounded-full transition-colors","data-selected":t===n,"aria-label":"Image ".concat(n+1," of ").concat(s),ref:e=>{e&&t===n&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},onClick:()=>l(n)},n))})})},te=()=>{let{openModal:e}=eQ(),{asset:t}=eR(),{flattenedAssets:s,uuidToFlattenedAssetsIndexMap:n}=w(),{isOpen:r,openDialog:i,closeDialog:c}=(0,ez.s)(eC.D.IMAGE_FULL_VIEW_MODAL),[o,d]=(0,l.useState)(()=>{var e,s;let a=null!=(s=n[null!=(e=t.uuid)?e:""])?s:-1;return -1===a?0:a}),u=s[o],m=o>0,x=o<s.length-1,p=(0,l.useCallback)(()=>{if(m){let t=o-1;d(t);let a=s[t];a&&e({id:a.uuid})}},[m,o,s,e]),h=(0,l.useCallback)(()=>{if(x){let t=o+1;d(t);let a=s[t];a&&e({id:a.uuid})}},[x,o,s,e]),g=(0,l.useCallback)(t=>{d(t);let a=s[t];a&&e({id:a.uuid})},[s,e]);(0,l.useEffect)(()=>{let e=e=>{"ArrowLeft"===e.key?(e.preventDefault(),p()):"ArrowRight"===e.key&&(e.preventDefault(),h())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,m,x,p,h]);let f=(0,l.useRef)(null),j=(0,l.useRef)(null);return((0,l.useEffect)(()=>{var e,s;let a=null!=(s=n[null!=(e=t.uuid)?e:""])?s:-1;-1!==a&&d(a)},[t.uuid,n]),u)?(0,a.jsxs)("div",{role:"button",className:"laptop:size-full laptop:flex-1 laptop:pointer-events-none flex w-full flex-col gap-2 focus-visible:outline-none",children:[(0,a.jsx)("div",{className:"bg-surface-primary laptop:size-full laptop:bg-transparent laptop:pointer-events-none relative h-117.5 w-full overflow-hidden",children:(0,a.jsxs)("div",{className:"laptop:pointer-events-none relative size-full",onTouchStart:e=>{e.targetTouches[0]&&(f.current={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})},onTouchMove:e=>{e.targetTouches[0]&&(j.current={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})},onTouchEnd:()=>{if(!f.current||!j.current)return;let{x:e,y:t}=f.current,{x:s,y:a}=j.current,l=e-s;Math.abs(l)>Math.abs(t-a)&&Math.abs(l)>50&&(l>0&&x?h():l<0&&m&&p()),f.current=null,j.current=null},children:[(0,a.jsx)("div",{className:"laptop:pointer-events-none relative size-full overflow-hidden",children:(0,a.jsx)(e6,{onZoomClick:()=>{i()},asset:u})}),(0,a.jsx)(e7,{onPrevious:p,onNext:h,canGoPrevious:m,canGoNext:x}),(0,a.jsx)(e5,{isOpen:r,setIsOpen:c})]})}),(0,a.jsx)(e9,{currentIndex:o,totalCount:s.length,onIndexChange:g})]}):null},tt=e=>{let{asset:t}=e,s=et(t);return(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(G.$,{size:"icon-sm",variant:"ghost",onClick:()=>s.download(),disabled:s.isInProgress,children:(0,a.jsx)(S.s3U,{className:"stroke-[1.6]"})}),(0,a.jsx)(T.HM,{asChild:!0,children:(0,a.jsx)(G.$,{size:"icon-sm",variant:"ghost",children:(0,a.jsx)(S.w0d,{})})})]})},ts=e=>{let{asset:t}=e,s=e_(t);return(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(G.$,{size:"icon-sm",variant:"ghost",onClick:()=>s.download(),disabled:s.isInProgress,children:(0,a.jsx)(S.s3U,{className:"stroke-[1.6]"})}),(0,a.jsx)(T.HM,{asChild:!0,children:(0,a.jsx)(G.$,{size:"icon-sm",variant:"ghost",children:(0,a.jsx)(S.w0d,{})})})]})},ta=()=>{let{asset:e}=eR();switch(e.service){case j.z1.IMAGE:return(0,a.jsx)(tt,{asset:e});case j.z1.VIDEO:return(0,a.jsx)(ts,{asset:e})}},tl=e=>{let{asset:t}=e,s=ew(),[n,r]=(0,l.useState)(!1),{vagErrorHandler:i}=(0,es._)(),c=ey(),o=async()=>{r(!0);try{let e=await s(t);await c.mutateAsync(e)}catch(e){i(e)}finally{r(!1)}};return(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",disabled:n,onClick:o,children:"Upscale"})},tn=e=>{let{asset:t}=e,{isVariating:s,handleImageVariate:l}=ex();return(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",disabled:s,onClick:()=>l({asset:t}),children:"Variate"})},tr=e=>{let{asset:t}=e,{handleAnimateImageAsset:s}=eL(),{closeModal:l}=eQ(),n=(0,k.useRouter)();return(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",onClick:()=>{s(t),l(),window.location.pathname!=U.z.VIDEO&&setTimeout(()=>{n.push(U.z.VIDEO)},50)},children:"Animate"})},ti=e=>{var t;let{asset:s}=e,{user:l}=(0,i.u)(),{enhancedPrompt:n,aspectRatio:r,model:c,hasPresets:o,preset:d,prompt:u}=(0,$.J)(s),{closeModal:m}=eQ(),{handleUsePrompt:x,handleUseSettings:p,handleUsePreset:h}=eq(),{handleAddImage:g}=(0,eM.Y)(),{handleVideoAddImage:f}=(0,eS.n)();return(0,a.jsxs)("div",{className:"border-border-primary laptop:w-88 laptop:border-1 laptop:bg-surface-primary-variant laptop:rounded-4 laptop:p-4 laptop:overflow-y-auto laptop:pointer-events-auto flex size-full flex-col items-stretch gap-6 border-t p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-2",children:[(0,a.jsx)(ta,{}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(D.H,{className:"size-4"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-label-sm font-medium",children:"by"}),(0,a.jsx)("span",{className:"text-content-primary text-label-sm font-medium",children:null==l?void 0:l.name})]})]}),(0,a.jsx)("div",{className:"text-content-tertiary text-label-sm flex items-center gap-1",children:(0,a.jsx)("span",{children:_()(s.createdAt).format("MMM D, YYYY")})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-1",children:[(0,a.jsx)("span",{className:"text-content-secondary text-label-md font-medium",children:"Prompt"}),(0,a.jsx)(eO,{prompt:n,className:"text-body-sm text-content-secondary"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(e1,{images:s.url.inputs,alt:"input"}),(null==d?void 0:d.thumbnail)&&(0,a.jsx)(e1,{images:[null==d?void 0:d.thumbnail],alt:"Preset"})]}),(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"bg-surface-primary rounded-2.5 flex items-center gap-1.5 px-2 py-1",children:[(0,a.jsx)("span",{className:"text-label-xs text-content-secondary font-medium",children:c.name}),(0,a.jsx)(S.OjI,{className:"text-content-secondary size-3.5"})]})}),(0,a.jsx)(V.ZI,{className:"rounded-4 border-border-primary bg-surface-elevated flex w-47.5 flex-col items-stretch gap-2 border p-4 drop-shadow-sm",sideOffset:8,align:"end",side:"bottom",children:(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-2",children:[(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Model"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs text-right font-medium",children:c.name})]}),(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Aspect Ratio"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs font-medium",children:r})]}),(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Preset"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs font-medium",children:null!=(t=null==d?void 0:d.name)?t:"-"})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,a.jsxs)(G.$,{variant:"secondary",size:"xs",className:"gap-1",onClick:()=>{p(s),m()},children:[(0,a.jsx)(S.TdU,{className:"size-2.5 stroke-[1.5]"}),"Use"]})})]})})]})]})]}),(0,a.jsx)("div",{className:"mt-auto flex flex-col items-stretch gap-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,a.jsx)("span",{className:"text-content-secondary text-label-md",children:"Quick Actions"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tl,{asset:s}),(0,a.jsx)(tn,{asset:s}),(0,a.jsx)(tr,{asset:s})]})]})}),(0,a.jsx)("div",{className:"flex flex-col items-stretch gap-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,a.jsx)("span",{className:"text-content-secondary text-label-md",children:"Use this"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",onClick:()=>{switch(window.location.pathname){case U.z.IMAGE:g(s.url.generation,s.url.thumbnail);break;case U.z.VIDEO:f(s.url.generation,s.url.thumbnail,!0)}m()},children:"Image"}),(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",onClick:()=>{x(s),m()},disabled:!u,children:"Prompt"}),(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",onClick:()=>{h(s),m()},disabled:!o,children:"Preset"})]})]})})]})},tc=e=>{var t;let{asset:s}=e,{user:l}=(0,i.u)(),{enhancedPrompt:n,aspectRatio:r,model:c,hasEffects:o,effect:d,prompt:u}=(0,eE.x)(s),{closeModal:m}=eQ(),{handleUsePrompt:x,handleUseSettings:p,handleUsePreset:h}=eq(),{handleAddImage:g}=(0,eM.Y)(),{handleVideoAddImage:f}=(0,eS.n)();return(0,a.jsxs)("div",{className:"border-border-primary laptop:w-88 laptop:border-1 laptop:bg-surface-primary-variant laptop:rounded-4 laptop:p-4 laptop:overflow-y-auto laptop:pointer-events-auto flex size-full flex-col items-stretch gap-6 border-t p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-2",children:[(0,a.jsx)(ta,{}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(D.H,{className:"size-4"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-label-sm font-medium",children:"by"}),(0,a.jsx)("span",{className:"text-content-primary text-label-sm font-medium",children:null==l?void 0:l.name})]})]}),(0,a.jsx)("div",{className:"text-content-tertiary text-label-sm flex items-center gap-1",children:(0,a.jsx)("span",{children:_()(s.createdAt).format("MMM D, YYYY")})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-1",children:[(0,a.jsx)("span",{className:"text-content-secondary text-label-md font-medium",children:"Prompt"}),(0,a.jsx)(eO,{prompt:n,className:"text-body-sm text-content-secondary"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(e1,{images:s.url.inputs,alt:"input"}),(null==d?void 0:d.thumbnail)&&(0,a.jsx)(e1,{images:[null==d?void 0:d.thumbnail],alt:"Effect"})]}),(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"bg-surface-primary rounded-2.5 flex items-center gap-1.5 px-2 py-1",children:[(0,a.jsx)("span",{className:"text-label-xs text-content-secondary font-medium",children:c.name}),(0,a.jsx)(S.OjI,{className:"text-content-secondary size-3.5"})]})}),(0,a.jsx)(V.ZI,{className:"rounded-4 border-border-primary bg-surface-elevated flex w-47.5 flex-col items-stretch gap-2 border p-4 drop-shadow-sm",sideOffset:8,align:"end",side:"bottom",children:(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-2",children:[(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Model"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs text-right font-medium",children:c.name})]}),(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Aspect Ratio"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs font-medium",children:r})]}),(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Preset"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs font-medium",children:null!=(t=null==d?void 0:d.name)?t:"-"})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,a.jsxs)(G.$,{variant:"secondary",size:"xs",className:"gap-1",onClick:()=>{p(s),m()},children:[(0,a.jsx)(S.TdU,{className:"size-2.5 stroke-[1.5]"}),"Use"]})})]})})]})]})]}),(0,a.jsx)("div",{className:"mt-auto flex flex-col items-stretch gap-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,a.jsx)("span",{className:"text-content-secondary text-label-md",children:"Use this"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",onClick:()=>{switch(window.location.pathname){case U.z.IMAGE:g(s.url.thumbnail,s.url.thumbnail);break;case U.z.VIDEO:f(s.url.thumbnail,s.url.thumbnail,!0)}m()},children:"Image"}),(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",onClick:()=>{x(s),m()},disabled:!u,children:"Prompt"}),(0,a.jsx)(G.$,{className:"w-full",variant:"secondary",size:"sm",onClick:()=>{h(s),m()},disabled:!o,children:"Effect"})]})]})})]})},to=()=>{let{asset:e}=eR();switch(null==e?void 0:e.service){case j.z1.IMAGE:return(0,a.jsx)(ti,{asset:e});case j.z1.VIDEO:return(0,a.jsx)(tc,{asset:e})}},td=()=>(0,a.jsxs)(T.c7,{className:"laptop:hidden border-none p-6 pb-0",children:[(0,a.jsx)(T.L3,{className:"sr-only",children:"Asset Full View Modal"}),(0,a.jsx)(T.rr,{className:"sr-only",children:"Asset Full View Modal"}),(0,a.jsx)("div",{}),(0,a.jsx)(ta,{})]}),tu=e=>{let{isBatched:t}=e,{id:s,closeModal:l}=eQ(),{flattenedAssets:n,uuidToFlattenedAssetsIndexMap:r}=w(),i=r[null!=s?s:""],c=null!=i?n[i]:void 0,o=!!c;return(0,a.jsx)(T.lG,{open:o,onOpenChange:e=>{e||l()},children:(0,a.jsx)(T.Cf,{className:"laptop:backdrop-blur-[25px] laptop:bg-surface-primary-variant/60 laptop:pointer-events-none! flex size-full flex-col gap-2 rounded-none",overlayProps:{className:"opacity-0 blur-none laptop:cursor-zoom-out"},children:o&&(0,a.jsxs)(eT,{asset:c,children:[(0,a.jsx)(td,{}),(0,a.jsxs)("div",{className:"laptop:flex-row laptop:size-full laptop:p-6 laptop:pointer-events-none flex w-full flex-col gap-6 overflow-y-auto",children:[(0,a.jsx)(te,{}),(0,a.jsx)(to,{},c.uuid)]})]})})})};var tm=s(91117),tx=s(78848);let tp=(0,l.createContext)(null),th=e=>{let{children:t}=e,s=(0,l.useRef)(null);return(0,a.jsx)(tp.Provider,{value:{parentRef:s},children:t})},tg=()=>{let e=(0,l.useContext)(tp);if(!e)throw Error("useEditorViewLayoutContext must be used within a EditorViewLayoutProvider");return e};var tf=s(93107),tj=s(87552),tv=s(96578),tN=s(52838);let tb=e=>{e.stopPropagation(),e.preventDefault()},ty=e=>{let{style:t,className:s,asset:n,...r}=e,{openModal:i}=eQ(),c=et(n),o=(0,tN.X)(),[d,u]=(0,l.useState)(!1),m=ew(),x=(0,k.useRouter)(),[p,h]=(0,l.useState)(!1),{vagErrorHandler:g}=(0,es._)(),{handleAddImage:f}=(0,eM.Y)(),{handleAnimateImageAsset:j}=eL(),{isVariating:v,handleImageVariate:N}=ex(),b=ey(),{prompt:y,aspectWidth:I,aspectHeight:w,isUpscaled:E}=(0,$.J)(n),A=async()=>{h(!0);try{let e=await m(n);await b.mutateAsync(e)}catch(e){g(e)}finally{h(!1)}},_=async()=>{if(await tv.i.call({title:"Delete Asset",description:"Are you sure you want to delete this asset?",confirmButtonText:"Delete",cancelButtonText:"Cancel",variant:"error"})){u(!0);try{await o.mutateAsync({asset:n})}catch(e){g(e),u(!1)}}};return(0,a.jsxs)("div",{id:n.uuid,className:(0,M.cn)("bg-surface-primary rounded-2 group relative isolate w-full cursor-pointer overflow-hidden",s),style:{...t,aspectRatio:I/w},role:"button",tabIndex:0,onClick:()=>i({id:n.uuid}),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&i({id:n.uuid})},...r,children:[(0,a.jsx)(z.default,{fill:!0,src:n.url.thumbnail,alt:y,className:"object-cover"}),(0,a.jsxs)("div",{className:"pointer-events-none invisible absolute inset-0 z-1 flex flex-col items-stretch justify-between group-hover:visible",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 p-2",children:[(0,a.jsx)("div",{children:E&&(0,a.jsx)(tj.E,{variant:"neutral-over-image",children:"Upscaled"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)(G.$,{className:"pointer-events-auto",variant:"img-hover-cta",onClick:e=>{tb(e),_()},size:"icon-xs",disabled:d,children:(0,a.jsx)(S.ucK,{})}),(0,a.jsx)(G.$,{className:"pointer-events-auto",variant:"img-hover-cta",onClick:e=>{tb(e),c.download()},size:"icon-xs",disabled:c.isInProgress,children:(0,a.jsx)(S.s3U,{})})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 p-2",children:[(0,a.jsx)(G.$,{className:"pointer-events-auto",variant:"img-hover-cta",onClick:e=>{tb(e),A()},size:"2xs",disabled:p,children:"Upscale"}),(0,a.jsx)(G.$,{className:"pointer-events-auto",variant:"img-hover-cta",onClick:e=>{tb(e),N({asset:n})},size:"2xs",disabled:v,children:"Variate"}),(0,a.jsx)(G.$,{className:"pointer-events-auto",variant:"img-hover-cta",onClick:e=>{tb(e),j(n),window.location.pathname!=U.z.VIDEO&&x.push(U.z.VIDEO)},size:"2xs",children:"Animate"}),(0,a.jsx)(G.$,{className:"pointer-events-auto",variant:"img-hover-cta",onClick:e=>{switch(tb(e),window.location.pathname){case U.z.IMAGE:f(n.url.generation,n.url.thumbnail);break;case U.z.VIDEO:x.push(U.z.IMAGE),f(n.url.thumbnail,n.url.thumbnail)}},size:"2xs",children:"Edit"})]})]})]})},tI=e=>{let{asset:t}=e,{aspectWidth:s,aspectHeight:l}=(0,$.J)(t);switch(t.status){case p.wQ.FAILED:return(0,a.jsxs)("div",{className:"rounded-2 bg-fill-primary isolate flex w-full flex-col items-center justify-center gap-3 text-center",style:{aspectRatio:s/l},children:[(0,a.jsx)("div",{className:"rounded-4 bg-surface-secondary text-content-tertiary p-3",children:(0,a.jsx)(S.mqY,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-content-secondary text-body-sm font-medium",children:"Generation failed"}),(0,a.jsxs)("div",{className:"text-content-tertiary text-body-xs",children:["Your generation was failed. please"," ",(0,a.jsx)("span",{className:"text-content-brand font-semibold",children:"retry"})]})]})]});case p.wQ.PENDING:case p.wQ.PROCESSING:return(0,a.jsx)(R.E,{className:"rounded-2 isolate flex w-full items-center justify-center",style:{aspectRatio:s/l},children:(0,a.jsx)(S.mPE,{className:"text-content-tertiary size-6 animate-spin"})});case p.wQ.FINISHED:return(0,a.jsx)(tf.Sn,{asset:t,children:(0,a.jsx)(ty,{asset:t})});default:return(0,a.jsx)("div",{className:"rounded-2 bg-fill-primary isolate flex w-full flex-col items-center justify-center gap-3 text-center",style:{aspectRatio:s/l},children:(0,a.jsxs)("div",{className:"text-content-secondary text-body-sm font-medium",children:["The case ",(0,a.jsx)("span",{className:"font-semibold",children:t.status})," is not handled"]})})}},tw=l.memo(e=>{let{src:t,...s}=e;return(0,a.jsx)("video",{...s,ref:e=>(e&&(e.src=t),()=>{e&&(e.src="")})})});tw.displayName="OptimizedVideoPlayer";let tE=e=>{let{style:t,className:s,asset:n,...r}=e,{openModal:i}=eQ(),c=e_(n),o=(0,tN.X)(),{vagErrorHandler:d}=(0,es._)(),[u,m]=(0,l.useState)(!1),{aspectWidth:x,aspectHeight:p}=(0,eE.x)(n),h=async()=>{if(await tv.i.call({title:"Delete Asset",description:"Are you sure you want to delete this asset?",confirmButtonText:"Delete",cancelButtonText:"Cancel",variant:"error"})){m(!0);try{await o.mutateAsync({asset:n})}catch(e){d(e),m(!1)}}};return(0,a.jsxs)("div",{id:n.uuid,className:(0,M.cn)("bg-surface-primary rounded-2 group relative isolate w-full cursor-pointer overflow-hidden",s),style:{...t,aspectRatio:x/p},role:"button",tabIndex:0,onClick:()=>i({id:n.uuid}),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&i({id:n.uuid})},...r,children:[(0,a.jsx)(tw,{src:n.url.generation,poster:n.url.thumbnail,muted:!0,autoPlay:!0,loop:!0,playsInline:!0}),(0,a.jsx)(G.$,{className:"pointer-events-none absolute top-2 right-2 group-hover:hidden",variant:"img-hover-cta",size:"icon-xs",asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(S.SFX,{})})}),(0,a.jsx)("div",{className:"pointer-events-none invisible absolute inset-0 z-1 flex flex-col items-stretch justify-between group-hover:visible",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 p-2",children:[(0,a.jsx)("div",{}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)(G.$,{className:"pointer-events-auto",variant:"img-hover-cta",onClick:e=>{tb(e),h()},size:"icon-xs",disabled:u,children:(0,a.jsx)(S.ucK,{})}),(0,a.jsx)(G.$,{className:"pointer-events-auto",variant:"img-hover-cta",onClick:e=>{tb(e),c.download()},size:"icon-xs",disabled:c.isInProgress,children:(0,a.jsx)(S.s3U,{})})]})]})})]})},tA=e=>{let{asset:t,className:s}=e,{aspectWidth:l,aspectHeight:n}=(0,eE.x)(t);switch(t.status){case p.wQ.FAILED:return(0,a.jsxs)("div",{className:(0,M.cn)("rounded-2 bg-fill-primary isolate flex w-full flex-col items-center justify-center gap-3 text-center",s),style:{aspectRatio:l/n},children:[(0,a.jsx)("div",{className:"rounded-4 bg-surface-secondary text-content-tertiary p-3",children:(0,a.jsx)(S.mqY,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-content-secondary text-body-sm font-medium",children:"Generation failed"}),(0,a.jsxs)("div",{className:"text-content-tertiary text-body-xs",children:["Your generation was failed. please"," ",(0,a.jsx)("span",{className:"text-content-brand font-semibold",children:"retry"})]})]})]});case p.wQ.PENDING:case p.wQ.PROCESSING:return(0,a.jsx)(R.E,{className:(0,M.cn)("rounded-2 isolate flex w-full items-center justify-center",s),style:{aspectRatio:l/n},children:(0,a.jsx)(S.mPE,{className:"text-content-tertiary size-6 animate-spin"})});case p.wQ.FINISHED:return(0,a.jsx)(tE,{asset:t,className:s});default:return(0,a.jsx)("div",{className:(0,M.cn)("rounded-2 bg-fill-primary isolate flex w-full flex-col items-center justify-center gap-3 text-center",s),style:{aspectRatio:l/n},children:(0,a.jsxs)("div",{className:"text-content-secondary text-body-sm font-medium",children:["The case"," ",(0,a.jsxs)("span",{className:"font-semibold",children:["'",t.status,"'"]})," is not handled"]})})}},t_=()=>{let{asset:e}=eR();switch(e.service){case j.z1.VIDEO:return(0,a.jsx)(tA,{asset:e});case j.z1.IMAGE:return(0,a.jsx)(tI,{asset:e});default:return(0,a.jsx)("div",{children:"Asset type not found"})}},tC=e=>{let{lanes:t}=e,{parentRef:s}=tg(),{flattenedAssets:l}=w(),n=100/t,r=(t-1)*8/t,i=r/(t-1),c=(0,tm.Te)({count:l.length,getScrollElement:()=>s.current,estimateSize:()=>400,lanes:t,gap:8,overscan:10});return(0,a.jsx)("div",{style:{width:"100%",position:"relative",height:"".concat(c.getTotalSize(),"px"),flexShrink:0,overflowAnchor:"none"},children:c.getVirtualItems().map(e=>{let t=l[e.index];return t?(0,a.jsx)("div",{style:{position:"absolute",top:0,left:"calc(".concat(e.lane*n,"% + ").concat(e.lane*i,"px)"),width:"calc(".concat(n,"% - ").concat(r,"px)"),height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)")},children:(0,a.jsx)(eT,{asset:t,children:(0,a.jsx)("div",{"data-index":e.index,ref:c.measureElement,children:(0,a.jsx)(t_,{})})})},e.index):null})})},tz=()=>{let{width:e}=(0,r.lW)(),t=Math.floor(e/275);return(0,a.jsx)(tC,{lanes:t},"".concat(t,"-lanes"))},tk=()=>{let e=(0,tx.cY)(),t=(0,tx.TA)(),s=(0,tx.RC)(),l=(0,tx.ZU)();return e?(0,a.jsx)(tC,{lanes:1},"mobile-small"):t?(0,a.jsx)(tC,{lanes:2},"mobile"):s?(0,a.jsx)(tC,{lanes:3},"tablet"):l?(0,a.jsx)(tC,{lanes:4},"laptop"):(0,a.jsx)(tz,{})},tO=(0,l.createContext)(null),tS=e=>{let{children:t,batch:s,batchSampleAsset:l}=e;return(0,a.jsx)(tO.Provider,{value:{batch:s,batchSampleAsset:l},children:t})},tG=()=>{let e=(0,l.useContext)(tO);if(!e)throw Error("useEditorViewBatchContext must be used within a EditorViewBatchProvider");return e},tT=()=>{var e;let{batch:t,batchSampleAsset:s}=tG(),{isLandscape:l}=null!=(e=eV(s))?e:{isLandscape:!1};return(0,a.jsx)("div",{className:(0,M.cn)("w-full gap-2",{"tablet:grid-cols-2 mobile-l:grid-cols-2 desktop-xl:grid-cols-[repeat(auto-fill,minmax(500px,1fr))] grid grid-cols-1":l,"tablet:grid-cols-4 desktop-xl:grid-cols-[repeat(auto-fill,minmax(250px,1fr))] grid grid-cols-2":!l}),children:t.assets.map(e=>(0,a.jsx)(eT,{asset:e,children:(0,a.jsx)(t_,{},e.uuid)},e.uuid))})},tR=(0,l.createContext)(null),tV=e=>{let{children:t,batch:s,batchSampleAsset:l}=e;return(0,a.jsx)(tR.Provider,{value:{batch:s,batchSampleAsset:l},children:t})},tM=()=>{let e=(0,l.useContext)(tR);if(!e)throw Error("useImageBatchContext must be used within a ImageBatchProvider");return e},tD=(0,l.createContext)(null),tU=e=>{let{children:t,batch:s,batchSampleAsset:l}=e;return(0,a.jsx)(tD.Provider,{value:{batch:s,batchSampleAsset:l},children:t})},tP=()=>{let e=(0,l.useContext)(tD);if(!e)throw Error("useVideoBatchContext must be used within a VideoBatchProvider");return e};var tL=s(26631),t$=s(82314);let tQ=()=>{let{handleUseSettings:e}=eq(),{batchSampleAsset:t,batch:s}=tM(),n=(0,tN.X)(),[r,i]=(0,l.useState)(!1),{vagErrorHandler:c}=(0,es._)(),o=async()=>{if(!r&&await tv.i.call({title:"Delete Batch",description:"Are you sure you want to delete this batch?",confirmButtonText:"Delete",cancelButtonText:"Cancel",variant:"error"})){i(!0);try{await Promise.all(s.assets.map(e=>n.mutateAsync({asset:e})))}catch(e){c(e),i(!1)}}},d=[{name:"Use settings",icon:(0,a.jsx)(S.Zes,{className:"stroke-[1.5]"}),onClick:()=>{e(t)}},{name:"Delete",icon:(0,a.jsx)(S.ucK,{className:"stroke-[1.5]"}),className:"text-content-critical",disabled:r,onClick:o}];return(0,a.jsxs)(t$.rI,{children:[(0,a.jsx)(G.$,{variant:"ghost",size:"icon-md",className:"shrink-0",asChild:!0,children:(0,a.jsx)(tL.l9,{children:(0,a.jsx)(S.HCC,{})})}),(0,a.jsx)(t$.SQ,{sideOffset:16,className:"w-60",align:"end",children:d.map(e=>(0,a.jsxs)(t$._2,{className:e.className,onClick:e.onClick,disabled:e.disabled,children:[e.icon,(0,a.jsx)("span",{children:e.name})]},e.name))})]})},tF=()=>{let{batch:e}=tM(),t=(0,tN.X)(),[s,n]=(0,l.useState)(!1),{vagErrorHandler:r}=(0,es._)(),i=async()=>{if(!s&&await tv.i.call({title:"Delete Batch",description:"Are you sure you want to delete this batch?",confirmButtonText:"Delete",cancelButtonText:"Cancel",variant:"error"})){n(!0);try{await Promise.all(e.assets.map(e=>t.mutateAsync({asset:e})))}catch(e){r(e),n(!1)}}};return(0,a.jsxs)(G.$,{size:"link-xs",variant:"link-secondary",onClick:i,disabled:s,children:[(0,a.jsx)(S.ucK,{className:"stroke-[1.6]"}),"Delete"]})},tB=()=>{let{batchSampleAsset:e}=tM(),{handleUseSettings:t}=eq();return(0,a.jsxs)(G.$,{size:"link-xs",variant:"link-secondary",onClick:()=>{t(e)},children:[(0,a.jsx)(S.TdU,{className:"stroke-[1.6]"}),"Use"]})},tY=()=>{var e;let{batchSampleAsset:t}=tM(),{prompt:s,aspectRatio:l,model:n,preset:r}=(0,$.J)(t),{handleUseSettings:i}=eq();return(0,a.jsxs)("div",{className:"group/list-setting tablet:w-[max(20dvw,--spacing(55))] tablet:flex-col flex w-full shrink-0 flex-row items-stretch gap-2",children:[(0,a.jsxs)("div",{className:(0,M.cn)("tablet:hidden flex items-center gap-1",{hidden:0===t.url.inputs.length}),children:[(0,a.jsx)(e1,{images:t.url.inputs,alt:"Input"}),(null==r?void 0:r.thumbnail)&&(0,a.jsx)(e1,{images:[null==r?void 0:r.thumbnail],alt:"Preset"})]}),(0,a.jsx)("div",{className:"text-content-secondary text-body-xs rounded-4 ring-border-primary tablet:hover:overflow-y-scroll group hover:bg-fill-primary-hover max-h-18 w-full p-3 ring-1 transition-colors ring-inset",children:(0,a.jsx)("span",{className:"tablet:line-clamp-3 tablet:group-hover:line-clamp-none line-clamp-1",children:s||"-"})}),(0,a.jsx)("div",{className:"tablet:hidden",children:(0,a.jsx)(tQ,{})}),(0,a.jsxs)("div",{className:"max-tablet:hidden flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(e1,{images:t.url.inputs,alt:"Input"}),(null==r?void 0:r.thumbnail)&&(0,a.jsx)(e1,{images:[null==r?void 0:r.thumbnail],alt:"Preset"})]}),(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-2.5 bg-surface-primary text-label-xs text-content-secondary px-2 py-1 font-medium",children:n.name})}),(0,a.jsx)(V.ZI,{className:"rounded-4 border-border-primary bg-surface-elevated flex w-47.5 flex-col items-stretch gap-2 border p-4 drop-shadow-sm",sideOffset:8,align:"end",side:"bottom",children:(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-2",children:[(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Model"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs text-right font-medium",children:n.name})]}),(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Aspect Ratio"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs font-medium",children:l})]}),(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Preset"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs font-medium",children:null!=(e=null==r?void 0:r.name)?e:"-"})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,a.jsxs)(G.$,{variant:"secondary",size:"xs",className:"gap-1",onClick:()=>{i(t)},children:[(0,a.jsx)(S.TdU,{className:"size-2.5 stroke-[1.5]"}),"Use"]})})]})})]})]}),(0,a.jsxs)("div",{className:"max-tablet:hidden tablet:group-hover/list-setting:visible invisible mt-auto flex items-center gap-3",children:[(0,a.jsx)(tB,{}),(0,a.jsx)(tF,{})]})]})},tJ=()=>{let{handleUseSettings:e}=eq(),{batchSampleAsset:t,batch:s}=tP(),n=(0,tN.X)(),[r,i]=(0,l.useState)(!1),{vagErrorHandler:c}=(0,es._)(),o=async()=>{if(!r&&await tv.i.call({title:"Delete Batch",description:"Are you sure you want to delete this batch?",confirmButtonText:"Delete",cancelButtonText:"Cancel",variant:"error"})){i(!0);try{await Promise.all(s.assets.map(e=>n.mutateAsync({asset:e})))}catch(e){c(e),i(!1)}}},d=[{name:"Use settings",icon:(0,a.jsx)(S.Zes,{className:"stroke-[1.5]"}),onClick:()=>{e(t)}},{name:"Delete",icon:(0,a.jsx)(S.ucK,{className:"stroke-[1.5]"}),className:"text-content-critical",disabled:r,onClick:o}];return(0,a.jsxs)(t$.rI,{children:[(0,a.jsx)(G.$,{variant:"ghost",size:"icon-md",className:"shrink-0",asChild:!0,children:(0,a.jsx)(tL.l9,{children:(0,a.jsx)(S.HCC,{})})}),(0,a.jsx)(t$.SQ,{sideOffset:16,className:"w-60",align:"end",children:d.map(e=>(0,a.jsxs)(t$._2,{className:e.className,onClick:e.onClick,disabled:e.disabled,children:[e.icon,(0,a.jsx)("span",{children:e.name})]},e.name))})]})},tZ=()=>{let{batch:e}=tP(),t=(0,tN.X)(),[s,n]=(0,l.useState)(!1),{vagErrorHandler:r}=(0,es._)(),i=async()=>{if(!s&&await tv.i.call({title:"Delete Batch",description:"Are you sure you want to delete this batch?",confirmButtonText:"Delete",cancelButtonText:"Cancel",variant:"error"})){n(!0);try{await Promise.all(e.assets.map(e=>t.mutateAsync({asset:e})))}catch(e){r(e),n(!1)}}};return(0,a.jsxs)(G.$,{size:"link-xs",variant:"link-secondary",onClick:i,disabled:s,children:[(0,a.jsx)(S.ucK,{className:"stroke-[1.6]"}),"Delete"]})},tX=()=>{let{batchSampleAsset:e}=tP(),{handleUseSettings:t}=eq();return(0,a.jsxs)(G.$,{size:"link-xs",variant:"link-secondary",onClick:()=>{t(e)},children:[(0,a.jsx)(S.TdU,{className:"stroke-[1.6]"}),"Use"]})},tK=()=>{var e;let{batchSampleAsset:t}=tP(),{prompt:s,aspectRatio:l,model:n,effect:r}=(0,eE.x)(t),{handleUseSettings:i}=eq();return(0,a.jsxs)("div",{className:"group/list-setting tablet:w-[max(20dvw,--spacing(55))] tablet:flex-col flex w-full shrink-0 flex-row items-stretch gap-2",children:[(0,a.jsxs)("div",{className:(0,M.cn)("tablet:hidden flex items-center gap-1",{hidden:0===t.url.inputs.length}),children:[(0,a.jsx)(e1,{images:t.url.inputs,alt:"Input"}),(null==r?void 0:r.thumbnail)&&(0,a.jsx)(e1,{images:[null==r?void 0:r.thumbnail],alt:"Effect"})]}),(0,a.jsx)("div",{className:"text-content-secondary text-body-xs rounded-4 ring-border-primary tablet:hover:overflow-y-scroll group hover:bg-fill-primary-hover max-h-18 w-full p-3 ring-1 transition-colors ring-inset",children:(0,a.jsx)("span",{className:"tablet:line-clamp-3 tablet:group-hover:line-clamp-none line-clamp-1",children:s||"-"})}),(0,a.jsx)("div",{className:"tablet:hidden",children:(0,a.jsx)(tJ,{})}),(0,a.jsxs)("div",{className:"max-tablet:hidden flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(e1,{images:t.url.inputs,alt:"Input"}),(null==r?void 0:r.thumbnail)&&(0,a.jsx)(e1,{images:[null==r?void 0:r.thumbnail],alt:"Effect"})]}),(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsx)("div",{className:"rounded-2.5 bg-surface-primary text-label-xs text-content-secondary px-2 py-1 font-medium",children:n.name})}),(0,a.jsx)(V.ZI,{className:"rounded-4 border-border-primary bg-surface-elevated flex w-47.5 flex-col items-stretch gap-2 border p-4 drop-shadow-sm",sideOffset:8,align:"end",side:"bottom",children:(0,a.jsxs)("div",{className:"flex flex-col items-stretch gap-2",children:[(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Model"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs text-right font-medium",children:n.name})]}),(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Aspect Ratio"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs font-medium",children:l})]}),(0,a.jsxs)("div",{className:"flex items-stretch justify-between gap-2",children:[(0,a.jsx)("span",{className:"text-content-tertiary text-body-xs",children:"Effect"}),(0,a.jsx)("span",{className:"text-content-secondary text-body-xs font-medium",children:null!=(e=null==r?void 0:r.name)?e:"-"})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,a.jsxs)(G.$,{variant:"secondary",size:"xs",className:"gap-1",onClick:()=>{i(t)},children:[(0,a.jsx)(S.TdU,{className:"size-2.5 stroke-[1.5]"}),"Use"]})})]})})]})]}),(0,a.jsxs)("div",{className:"max-tablet:hidden tablet:group-hover/list-setting:visible invisible mt-auto flex items-center gap-3",children:[(0,a.jsx)(tX,{}),(0,a.jsx)(tZ,{})]})]})},tW=()=>{let{batchSampleAsset:e,batch:t}=tG();switch(e.service){case j.z1.IMAGE:return(0,a.jsx)(tV,{batch:t,batchSampleAsset:e,children:(0,a.jsx)(tY,{})});case j.z1.VIDEO:return(0,a.jsx)(tU,{batch:t,batchSampleAsset:e,children:(0,a.jsx)(tK,{})});default:return null}},tH=()=>{let{parentRef:e}=tg(),{assetBatches:t}=w(),s=(0,tm.Te)({count:t.length,getScrollElement:()=>e.current,estimateSize:()=>400,gap:24,overscan:10});return(0,a.jsx)("div",{style:{height:"".concat(s.getTotalSize(),"px"),flexShrink:0,width:"100%",position:"relative"},children:s.getVirtualItems().map(e=>{var l;let n=t[e.index],r=null==n||null==(l=n.assets)?void 0:l[0];return r?(0,a.jsx)("div",{style:{position:"absolute",width:"100%",top:0,left:0,height:e.size,transform:"translateY(".concat(e.start,"px)")},children:(0,a.jsx)("div",{className:"tablet:flex-row image-view-item tablet:gap-8 tablet:items-stretch flex flex-col-reverse items-start justify-between gap-2 overflow-hidden","data-index":e.index,ref:s.measureElement,children:(0,a.jsxs)(tS,{batch:n,batchSampleAsset:r,children:[(0,a.jsx)(tT,{}),(0,a.jsx)(tW,{})]},r.batchId)})},e.key):null})})},tq=e=>{let{emptyScreen:t}=e,{flattenedAssets:s}=w(),{view:l}=m();return 0===s.length?t:(0,a.jsxs)(c.tU,{value:l,className:"size-full",children:[(0,a.jsx)(c.av,{value:o.GRID,className:"size-full",children:(0,a.jsx)(tk,{})}),(0,a.jsx)(c.av,{value:o.LIST,className:"size-full",children:(0,a.jsx)(tH,{})}),(0,a.jsx)(tu,{})]})},t0=()=>(0,a.jsx)("div",{className:"flex size-full items-center justify-center pb-38",children:(0,a.jsx)("span",{className:"text-heading-lg text-content-primary font-semibold",children:"An error occurred while loading the page. Please try again later."})}),t1=()=>(0,a.jsx)(R.E,{className:"rounded-2 w-full overflow-hidden"}),t2=e=>{let{index:t}=e;return(0,a.jsxs)("div",{className:"tablet:flex-row image-view-item tablet:gap-8 flex flex-col-reverse items-start justify-between gap-2",children:[(0,a.jsxs)("div",{"data-aspect":t%2==0?"portrait":"landscape",className:"tablet:data-[aspect=landscape]:grid-cols-2 tablet:data-[aspect=portrait]:grid-cols-4 grid w-full gap-2 data-[aspect=landscape]:grid-cols-1 data-[aspect=portrait]:grid-cols-2 data-[aspect=landscape]:*:[div]:aspect-video data-[aspect=portrait]:*:[div]:aspect-square",children:[(0,a.jsx)(t1,{}),(0,a.jsx)(t1,{}),(0,a.jsx)(t1,{}),(0,a.jsx)(t1,{})]}),(0,a.jsxs)("div",{className:"tablet:w-[max(20dvw,--spacing(55))] tablet:flex-col flex w-full shrink-0 flex-row items-center justify-stretch gap-2",children:[(0,a.jsx)(R.E,{className:"rounded-3 tablet:h-18 h-10 w-full"}),(0,a.jsx)(R.E,{className:"tablet:hidden rounded-3 size-10 shrink-0"}),(0,a.jsxs)("div",{className:"max-tablet:hidden flex w-full items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(R.E,{className:"size-8"}),(0,a.jsx)(R.E,{className:"size-8"})]}),(0,a.jsx)(R.E,{className:"rounded-2.5 bg-surface-primary h-6 w-16"})]})]})]})},t5=()=>(0,a.jsx)(c.av,{value:o.LIST,className:"tablet:gap-8 flex flex-col items-stretch gap-2",children:Array.from({length:20}).map((e,t)=>(0,a.jsx)(t2,{index:t},t))}),t8=()=>(0,a.jsx)(c.av,{value:o.GRID,className:"tablet:grid-cols-3 laptop:grid-cols-4 desktop:grid-cols-5 grid grid-cols-2 gap-2 *:[div]:aspect-square",children:Array.from({length:50}).map((e,t)=>(0,a.jsx)(t1,{},t))}),t4=()=>{let{view:e}=m();return(0,a.jsx)(c.tU,{className:"flex flex-col items-stretch gap-2",value:e,children:e===o.LIST?(0,a.jsx)(t5,{}):(0,a.jsx)(t8,{})})};var t3=s(93709),t6=s(89536),t7=s(16750);let t9=e=>{let{...t}=e;return(0,a.jsx)(t3.bL,{"data-slot":"select",...t})},se=e=>{let{...t}=e;return(0,a.jsx)(t3.YJ,{"data-slot":"select-group",...t})},st=e=>{let{className:t,children:s,position:l="popper",variant:n,viewportClassName:r,...i}=e;return(0,a.jsx)(t3.ZL,{children:(0,a.jsx)(t3.UC,{"data-slot":"select-content",className:(0,M.cn)((0,t6.Kb)({variant:n}),"popper"===l&&"bg-background text-content-primary ring-border-primary ring-1 drop-shadow-sm data-[side=bottom]:translate-y-2.5 data-[side=left]:-translate-x-2.5 data-[side=right]:translate-x-2.5 data-[side=top]:-translate-y-2.5",t),position:l,...i,children:(0,a.jsx)(t3.LM,{className:(0,M.cn)("popper"===l&&"h-[calc(var(--radix-select-trigger-height)-18px)] w-[calc(var(--radix-select-trigger-width)-18px)]",r),children:s})})})},ss=e=>{let{className:t,variant:s,sticky:l,...n}=e;return(0,a.jsx)(t3.JU,{"data-slot":"select-label",className:(0,t7.B)({variant:s,className:t,sticky:l}),...n})},sa=e=>{let{className:t,children:s,variant:l,size:n,...r}=e;return(0,a.jsxs)(t3.q7,{"data-slot":"select-item",className:(0,M.cn)((0,t6.OZ)({className:t,variant:l,size:n})),...r,children:[(0,a.jsx)("span",{className:"absolute right-2.5 flex items-center justify-center",children:(0,a.jsx)(t3.VF,{children:(0,a.jsx)(S.Srz,{className:"text-content-secondary"})})}),(0,a.jsx)(t3.p4,{className:"flex w-full items-center gap-2",children:s})]})},sl=()=>{let{view:e,setView:t}=m();return(0,a.jsxs)("div",{className:"bg-surface-secondary flex items-center gap-1 rounded-full p-[3px]",children:[(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsx)("button",{type:"button",className:"data-[selected=true]:text-content-primary data-[selected=true]:bg-fill-tertiary text-content-secondary flex cursor-pointer items-center gap-2 rounded-full px-3 py-1.5","data-selected":e===o.LIST,onClick:()=>t(o.LIST),children:(0,a.jsx)(S.adC,{className:"size-3.5 shrink-0"})})}),(0,a.jsx)(V.ZI,{children:"List View"})]}),(0,a.jsxs)(V.m_,{children:[(0,a.jsx)(V.k$,{asChild:!0,children:(0,a.jsx)("button",{type:"button",className:"data-[selected=true]:text-content-primary data-[selected=true]:bg-fill-tertiary text-content-secondary flex cursor-pointer items-center gap-2 rounded-full px-3 py-1.5","data-selected":e===o.GRID,onClick:()=>t(o.GRID),children:(0,a.jsx)(S.S31,{className:"size-3.5 shrink-0"})})}),(0,a.jsx)(V.ZI,{children:"Gallery View"})]})]})},sn=()=>{let{filter:e,setFilter:t}=b();return(0,a.jsxs)(t9,{value:e,onValueChange:t,children:[(0,a.jsx)(t3.l9,{asChild:!0,children:(0,a.jsx)(G.$,{shape:"pill",size:"icon-sm",variant:"secondary",children:(0,a.jsx)(S.Zes,{})})}),(0,a.jsx)(st,{className:"w-50",viewportClassName:"h-[calc(--spacing(50)-18px)] w-[calc(--spacing(50)-18px)]",children:(0,a.jsxs)(se,{children:[(0,a.jsx)(ss,{className:"bg-transparent",children:"Media type"}),Object.values(v).map(e=>(0,a.jsx)(sa,{value:e,className:"capitalize",children:e},e))]})})]})},sr=()=>(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,a.jsx)(sl,{}),(0,a.jsx)(sn,{})]}),si=e=>{let{children:t}=e,{parentRef:s}=tg();return(0,a.jsx)("div",{ref:s,className:"size-full overflow-y-auto px-4",id:h.G.EDITOR_SCROLL_LAYOUT,children:(0,a.jsx)("div",{className:"flex min-h-[100dvh] w-full flex-1 flex-col items-stretch gap-6 pt-[calc(--spacing(4)+--spacing(17))] pb-60",children:t})})};var sc=s(31994);let so=()=>{let{imageGenerationForm:e}=(0,eP.NT)(),t=(0,F.Q)(e),{imageMode:s}=(0,er.bO)(),[{modelListId:a,presetListId:n,prompt:r,aspectRatio:i,variations:c,mode:o},d]=(0,e$.ab)({prompt:e$.tU,modelListId:e$.GJ,presetListId:e$.GJ,aspectRatio:e$.tU,variations:e$.GJ,mode:(0,e$.Oq)(Object.values(eu.K))}),u=o?s[o].models:s.create.models;return(0,l.useEffect)(()=>{var e,s;let l=u.find(e=>e.id===a),m=t.current.getValues("model"),x=null==l?void 0:l.presets.find(e=>e.id===n);o&&t.current.setValue("mode",o),l&&t.current.setValue("model",l),x&&(null==(e=null!=l?l:m)?void 0:e.presets.includes(x))&&t.current.setValue("preset",x),r&&t.current.setValue("prompt",r),i&&(null==(s=null!=l?l:m)?void 0:s.aspectRatio.includes(i))&&t.current.setValue("aspectRatio",i),c&&Object.values(sc.N).includes(c)&&t.current.setValue("numberOfImages",c),d({modelListId:null,presetListId:null,prompt:null,aspectRatio:null,variations:null,mode:null})},[i,a,u,n,r,t,d,c,o]),null},sd=()=>{let{videoGenerationForm:e}=(0,eP.NT)(),t=(0,F.Q)(e),{videoModels:s,videoEffects:a}=(0,er.bO)(),[{modelListId:n,prompt:r,effectListId:i,resolution:c,aspectRatio:o,duration:d},u]=(0,e$.ab)({modelListId:e$.GJ,prompt:e$.tU,effectListId:e$.GJ,resolution:e$.tU,aspectRatio:e$.tU,duration:e$.GJ});return(0,l.useEffect)(()=>{var e;let l=a.find(e=>e.id===i),m=s.find(e=>e.id===n),x=t.current.getValues("model");m&&t.current.setValue("model",m),l&&(null==(e=(null!=m?m:x).supportedEffectsListIds)?void 0:e.includes(l.id))&&t.current.setValue("effect",l),r&&t.current.setValue("prompt",r),c&&(null!=m?m:x).supportedResolutions.includes(c)&&t.current.setValue("resolution",c),o&&(null!=m?m:x).t2vSupportedAspectRatios.includes(o)&&t.current.setValue("aspectRatio",o),d&&(null!=m?m:x).supportedDurations.includes(d)&&t.current.setValue("duration",d),u({modelListId:null,effectListId:null,prompt:null,resolution:null,aspectRatio:null,duration:null})},[t,r,s,a,i,n,u,c,o,d]),null},su=e=>{let{children:t}=e;return(0,a.jsx)(th,{children:(0,a.jsxs)(eP.Sr,{children:[t,(0,a.jsxs)(l.Suspense,{children:[(0,a.jsx)(so,{}),(0,a.jsx)(sd,{})]})]})})},sm=e=>{let{children:t}=e;return(0,a.jsx)(su,{children:(0,a.jsx)(tf.PC,{children:(0,a.jsxs)(si,{children:[(0,a.jsx)(sr,{}),t]})})})},sx=e=>{let{emptyScreen:t}=e,{user:s}=(0,i.u)(),c=(0,r.DE)();return s?c?(0,a.jsx)(n.ErrorBoundary,{fallback:(0,a.jsx)(t0,{}),children:(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(t4,{}),children:(0,a.jsx)(I,{children:(0,a.jsx)(tq,{emptyScreen:t})})})}):(0,a.jsx)(t4,{}):t},sp=e=>{let{children:t,emptyScreen:s}=e;return(0,a.jsxs)(sm,{children:[(0,a.jsx)(sx,{emptyScreen:s}),t]})}}},e=>{e.O(0,[3970,6701,8987,7305,5548,2281,9821,5680,3155,7488,8249,3184,8418,2026,7056,3777,9654,3021,587,1902,7358],()=>e(e.s=84184)),_N_E=e.O()}]);