"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9654],{2899:(e,t,a)=>{a.d(t,{$:()=>r});let r=e=>{let t=e.slice(0,255);return{promptText1:t,promptText2:e.slice(255,510),promptText3:e.slice(510)}}},3711:(e,t,a)=>{a.d(t,{P:()=>s});var r=a(7620),i=a(3397),l=a(53605);function s(){var e;let{subscriptionBasedConcurrentGenerations:t}=(0,i.bO)(),{subscribedPriceItem:a}=(0,l.c)();return(0,r.useMemo)(()=>{var e,r;if(!t)return null;let i=t[null!=(r=null==a||null==(e=a.StripeProduct)?void 0:e.name)?r:"Free"];return null!=i?i:null},[null==a||null==(e=a.StripeProduct)?void 0:e.name,t])}},4155:(e,t,a)=>{a.d(t,{s:()=>s});var r=a(61744),i=a(25761),l=a(21812);let s=()=>{let{imageGenerationForm:e}=(0,i.NT)(),{extractImageModelsForMode:t}=(0,l.M)();return{handleImageModelSelect:a=>{let i=e.getValues("mode"),l=t(i),s=e.getValues("preset"),n=l.find(e=>e.modelId===a);if(!n)return;let d=e.getValues("aspectRatio");if(!n.aspectRatio.includes(d)&&n.aspectRatio[0]&&e.setValue("aspectRatio",n.aspectRatio[0]),e.setValue("model",n),i===r.K.IMAGE_PROMPT){let t=e.getValues("images"),a=t[0]?[t[0]]:[];e.setValue("images",a)}else{let t=e.getValues("images"),a=n.maxImages,r=t.slice(0,a);e.setValue("images",r)}if(n.presets.find(e=>e.id===(null==s?void 0:s.id)))e.setValue("preset",s);else{let t=n.presets[0];e.setValue("preset",t)}}}}},6737:(e,t,a)=>{a.d(t,{Bc:()=>i,Bx:()=>s,Wc:()=>l,je:()=>r});let r=async(e,t)=>(await fetch(e,t)).blob(),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";return new Blob([e],{type:t})},l=e=>URL.createObjectURL(e),s=async(e,t)=>{let a=await fetch(e),r=await a.blob();return new File([r],t,{type:r.type})}},13402:(e,t,a)=>{a.d(t,{d:()=>i});var r=a(22360);let i=()=>{(e=>{let t=Number(localStorage.getItem(e));isNaN(t)?localStorage.setItem(e,"".concat(0)):localStorage.setItem(e,"".concat(t+1))})(r.C.GEN_TILL_EXPORT)}},14588:(e,t,a)=>{a.d(t,{d:()=>E});var r=a(59051),i=a(98357),l=a(20364),s=a(3995),n=a(7528),d=a(88796),o=a(36270),u=a(85409),c=a(2584);let m=u.Lr;var p=a(1227),g=a(42203);let b=u.Lr;class v extends s.i{async generateImageAsync(e){let t=await (0,n.or)(async()=>await this._client.post(i.X.GENERATE_IMAGE_ASYNC,(e=>{let{images:t,...a}=e,{metadata:r}=a,i={...(0,d.el)(a),count:a.count,clientVersion:a.clientVersion,metadata:{placeholderUuid:r.placeholderUuid,promptWithoutManipulation:r.promptWithoutManipulation,presetId:r.presetId}},l=(0,o.j)(i);return(0,d.OM)(l,t),l})({...e,clientVersion:1}))),a=(0,r.b)(m,t.data).map(e=>{if(e.status===c.R.ERROR){var t;return{status:c.R.ERROR,code:e.code,message:e.message,details:null!=(t=e.details)?t:[e.message]}}return{id:e.id,batchId:e.batchId,status:c.R.SUCCESS,cost:e.cost}});return{...t,data:a}}async generateImage(e){let t=await (0,n.or)(async()=>await this._client.post(i.X.GENERATE_IMAGE,(0,d.CM)(e),{responseType:"arraybuffer"})),a=(0,d.yM)(t.data);return{...t,data:a}}async upscaleImageAsync(e){let t=await (0,n.or)(async()=>await this._client.post(i.X.UPSCALE_IMAGE_ASYNC,(e=>{let t={image:e.image,style_id:"".concat(e.styleId),metadata:e.metadata};return(0,o.j)(t)})({...e,clientVersion:1}))),a=(0,r.b)(b,t.data).map(e=>{if(e.status===c.R.ERROR){var t;return{status:c.R.ERROR,code:e.code,message:e.message,details:null!=(t=e.details)?t:[e.message]}}return{id:e.id,batchId:e.batchId,status:c.R.SUCCESS}});return{...t,data:a}}async getAllImageAssets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getAllAssets({service:[l.z1.IMAGE],...e}),a=(0,p.N5)(t.data);return{...t,data:a}}async getAllImageUserAssets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await this.getAllAssets({service:[l.z1.USER],refService:l.z1.IMAGE,...e}),a=(0,g.U)(t.data);return{...t,data:a}}async uploadImageUserAsset(e){let t=await this.uploadUserAsset({...e,ref_service:l.eB[l.z1.IMAGE],metadata:JSON.stringify(e.metadata)}),a=t.data;return{...t,data:a}}constructor(e){super(e)}}var f=a(17643);let E=new v({client:a(31201).x,asyncBucketUrl:f.h.NEXT_PUBLIC_ASYNC_BUCKET_URL})},16750:(e,t,a)=>{a.d(t,{B:()=>r});let r=(0,a(615).F)("text-content-tertiary text-label-md px-2 pt-2 pb-1 font-medium",{variants:{variant:{primary:"bg-surface-primary-variant",secondary:"bg-surface-elevated"},sticky:{true:"sticky top-0 left-0 z-1",false:""}},defaultVariants:{variant:"primary",sticky:!1}})},21517:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(61744),i=a(25761),l=a(21812),s=a(4155);let n=function(){let{onSelect:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{imageGenerationForm:t}=(0,i.NT)(),{extractImageModelsForMode:a}=(0,l.M)(),{handleImageModelSelect:n}=(0,s.s)();return{handleImageModeSelect:(i,l)=>{let s=t.getValues("mode"),d=t.getValues("model");if(i!==s||null!=l&&d.modelId!==l){var o;let e=a(i),s=null!=(o=e.find(e=>e.modelId===l))?o:e[0];if(!s)return;if(i===r.K.IMAGE_PROMPT){let e=t.getValues("images"),a=e[0]?[e[0]]:[];t.setValue("images",a)}else{let e=t.getValues("images"),a=s.maxImages,r=e.slice(0,a);t.setValue("images",r)}t.setValue("mode",i),n(s.modelId)}null==e||e(i)}}}},21812:(e,t,a)=>{a.d(t,{M:()=>s});var r=a(7620),i=a(61744),l=a(3397);let s=()=>{let{imageMode:e}=(0,l.bO)();return{extractImageModelsForMode:(0,r.useCallback)(t=>t===i.K.IMAGE_PROMPT?e.create.models:e[t].models,[e])}}},22625:(e,t,a)=>{a.d(t,{n:()=>r});let r={SUCCESSFUL:"Successful",FAILED:"Failed"}},25761:(e,t,a)=>{a.d(t,{Sr:()=>x,NT:()=>V});var r=a(54568),i=a(7620),l=a(90060),s=a(61938),n=a(61744),d=a(31994),o=a(3397),u=a(79536),c=a(35044);let m=u.Ik({id:u.ai(),name:u.Yj(),thumbnail:u.Yj(),thumbnailPreset:u.Yj(),aspectRatio:u.Yj(),prompt:u.Yj()}),p=u.Ik({id:u.ai(),modelId:u.ai(),name:u.Yj(),description:u.Yj(),icon:u.Yj(),aspectRatio:u.YO(u.Yj()),maxImages:u.ai(),minImages:u.ai(),allowedPlans:u.YO(c.En).optional(),presets:u.YO(m),isEnhance:u.zM(),enhancerId:u.Yj().optional()});var g=a(25826);let b=g.Ay$.object({id:g.Ay$.string(),src:g.Ay$.string(),thumbnailSrc:g.Ay$.string()});var v=a(38727);let f=u.Ik({prompt:u.Yj(),model:p,mode:u.k5(n.K),aspectRatio:u.Yj(),numberOfImages:u.ai(),preset:m.optional(),images:u.YO(b),shouldRetainPrompt:u.zM().optional(),imageUploadType:u.k5(v.R).optional()});var E=a(73514);let I=u.Ik({id:u.ai(),effectId:u.ai(),aspectRatio:u.Yj(),name:u.Yj(),thumbnail:u.Yj(),sd:u.Yj(),hd:u.Yj()}),h=u.Ik({textToVideo:u.Yj().optional().nullable(),imageToVideo:u.Yj().optional().nullable(),imageToVideoEffects:u.Yj().optional().nullable()}),y=u.Ik({id:u.ai(),modelId:u.ai(),name:u.Yj(),icon:u.Yj(),description:u.Yj(),i2vAspectRatioNotNeeded:u.zM().optional(),allowedPlans:u.YO(c.En).optional(),shouldGenerateImageFirst:u.zM(),t2vSupportedAspectRatios:u.YO(u.Yj()),i2vSupportedAspectRatios:u.YO(u.Yj()),isEnhance:u.zM(),enhancerIdConfig:h,supportedEffectsListIds:u.YO(u.ai()).optional(),supportedDurations:u.YO(u.ai()),supportedResolutions:u.YO(u.Yj()),isLastFrameSupported:u.zM().optional()}),A=u.Ik({prompt:u.Yj(),model:y,mode:u.k5(E.s),aspectRatio:u.Yj(),effect:I.optional(),firstFrame:b.optional(),lastFrame:b.optional(),shouldRetainPrompt:u.zM().optional(),duration:u.ai().optional(),resolution:u.Yj().optional(),imageUploadType:u.k5(v.R).optional()}),R=(0,i.createContext)(null),x=e=>{let{children:t}=e,a=(()=>{let{videoModels:e}=(0,o.bO)(),t=e[0];return(0,s.mN)({mode:"onChange",resolver:(0,l.u)(A),defaultValues:{prompt:"",shouldRetainPrompt:!1,model:t,mode:E.s.CREATE,aspectRatio:null==t?void 0:t.t2vSupportedAspectRatios[0],duration:null==t?void 0:t.supportedDurations[0],resolution:null==t?void 0:t.supportedResolutions[0]}})})(),i=(()=>{var e;let{imageMode:t}=(0,o.bO)(),a=t.create.models[0];return(0,s.mN)({mode:"onChange",resolver:(0,l.u)(f),defaultValues:{prompt:"",shouldRetainPrompt:!1,model:a,mode:n.K.CREATE,aspectRatio:null!=(e=null==a?void 0:a.aspectRatio[0])?e:"1:1",numberOfImages:d.N.FOUR,preset:null==a?void 0:a.presets[0],images:[]}})})();return(0,r.jsx)(R.Provider,{value:{imageGenerationForm:i,videoGenerationForm:a},children:t})},V=()=>{let e=(0,i.useContext)(R);if(!e)throw Error("useEditorFormsContext must be used within a EditorFormsProvider");return e}},31994:(e,t,a)=>{a.d(t,{N:()=>l,Q:()=>s});var r=a(54568),i=a(71140);let l={ONE:1,TWO:2,THREE:3,FOUR:4},s={[l.ONE]:{value:l.ONE,label:"1 image",ctaLabel:"1v",icon:(0,r.jsx)(i.tDS,{})},[l.TWO]:{value:l.TWO,label:"2 images",ctaLabel:"2v",icon:(0,r.jsx)(i.Td,{})},[l.THREE]:{value:l.THREE,label:"3 images",ctaLabel:"3v",icon:(0,r.jsx)(i.Fpo,{})},[l.FOUR]:{value:l.FOUR,label:"4 images",ctaLabel:"4v",icon:(0,r.jsx)(i.je5,{})}}},38727:(e,t,a)=>{a.d(t,{R:()=>r,r:()=>i});let r={DRAG:"drag",RECENT:"recent",NEW:"new"},i={[r.DRAG]:"Drag",[r.RECENT]:"Add Image - Recents",[r.NEW]:"Add Image - New"}},40515:(e,t,a)=>{a.d(t,{Y:()=>o});var r=a(51874),i=a(65304),l=a(61744),s=a(3397),n=a(25761),d=a(21517);let o=function(){let{onSettle:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{imageMode:t}=(0,s.bO)(),{imageGenerationForm:a}=(0,n.NT)(),{handleImageModeSelect:o}=(0,d.E)();return{handleAddImage:(s,n)=>{let d=a.getValues("images"),u=a.getValues("mode"),c=a.getValues("model"),m=(0,i.g)(),p=[...d];try{let e=u===l.K.CREATE?t.edit.models[0]:c;if(!e)throw Error("No model found");d.length>=e.maxImages&&p.pop(),p.push({id:m,src:s,thumbnailSrc:n}),u===l.K.CREATE&&o(l.K.EDIT,e.modelId),a.setValue("images",p)}catch(e){e instanceof Error?r.oR.error(e.message):r.oR.error("Failed to add image")}return null==e||e(),m}}}},43898:(e,t,a)=>{a.d(t,{Q:()=>n});var r=a(73514),i=a(25761),l=a(61668),s=a(97915);let n=function(){let{onSelect:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{videoGenerationForm:t}=(0,i.NT)(),{extractVideoModelsForMode:a}=(0,l.a)(),{handleVideoModelSelect:n}=(0,s.k)();return{handleVideoModeSelect:(i,l)=>{let s=t.getValues("mode"),d=t.getValues("model");if(i!==s||null!=l&&d.modelId!==l){var o;let e=a(i),s=null!=(o=e.find(e=>e.modelId===l))?o:e[0];if(!s)return;i===r.s.CREATE?(t.setValue("firstFrame",void 0),t.setValue("lastFrame",void 0)):s.isLastFrameSupported||t.setValue("lastFrame",void 0),t.setValue("mode",i),n(s.modelId)}null==e||e(i)}}}},45382:(e,t,a)=>{a.d(t,{n:()=>d});var r=a(51874),i=a(65304),l=a(73514),s=a(25761),n=a(43898);let d=()=>{let{videoGenerationForm:e}=(0,s.NT)(),{handleVideoModeSelect:t}=(0,n.Q)();return{handleVideoAddImage:(a,s,n)=>{let d=e.getValues("mode"),o=e.getValues("model"),u=(0,i.g)();try{if(!o)throw Error("No model found");d===l.s.CREATE&&t(l.s.IMAGE_TO_VIDEO,o.modelId),e.setValue(n||!o.isLastFrameSupported?"firstFrame":"lastFrame",{id:u,src:a,thumbnailSrc:s})}catch(e){e instanceof Error?r.oR.error(e.message):r.oR.error("Failed to add image")}return u}}}},52838:(e,t,a)=>{a.d(t,{X:()=>v});var r=a(87606),i=a(16258),l=a(20364),s=a(25868),n=a(59761),d=a(90416);let o=[[d.n.IMAGE_ASSETS],[d.n.VIDEO_ASSETS],(0,s.ld)(),(0,s.ld)([l.z1.IMAGE]),(0,s.ld)([l.z1.VIDEO]),[n.e.INFINITE,...(0,s.ld)()],[n.e.INFINITE,...(0,s.ld)([l.z1.IMAGE])],[n.e.INFINITE,...(0,s.ld)([l.z1.VIDEO])]];var u=a(81789),c=a(25482);let m=(e,t)=>({...e,data:{...e.data,assets:e.data.assets.filter(e=>e.uuid!==t)}}),p=(e,t)=>({...e,pages:e.pages.map(e=>m(e,t))}),g=(e,t)=>({...e,data:{...e.data,assets:[t,...e.data.assets]}}),b=(e,t)=>e.pages[0]?{...e,pages:[...e.pages,{...e.pages[0],data:{...e.pages[0].data,assets:[t,...e.pages[0].data.assets]}}]}:e,v=()=>{let e=(0,r.jE)();return(0,i.n)({mutationKey:[u.S.DELETE_ASSET],mutationFn:async e=>{let{asset:t}=e;return c.u.deleteAsset({assetUuid:t.uuid})},onMutate:t=>{switch(t.asset.service){case l.z1.IMAGE:for(let a of o)e.getQueryData(a)&&e.setQueryData(a,e=>"data"in e?m(e,t.asset.uuid):p(e,t.asset.uuid));break;case l.z1.USER:switch(t.asset.refService){case l.z1.IMAGE:e.setQueryData([d.n.IMAGE_USER_ASSETS],e=>m(e,t.asset.uuid));break;case l.z1.VIDEO:e.setQueryData([d.n.VIDEO_USER_ASSETS],e=>m(e,t.asset.uuid))}}},onError:(t,a)=>{switch(a.asset.service){case l.z1.IMAGE:for(let t of o)e.getQueryData(t)&&e.setQueryData(t,e=>"data"in e?g(e,a.asset):b(e,a.asset));break;case l.z1.USER:switch(a.asset.refService){case l.z1.IMAGE:e.setQueryData([d.n.IMAGE_USER_ASSETS],e=>g(e,a.asset));break;case l.z1.VIDEO:e.setQueryData([d.n.VIDEO_USER_ASSETS],e=>g(e,a.asset))}}}})}},61668:(e,t,a)=>{a.d(t,{a:()=>s});var r=a(7620),i=a(73514),l=a(3397);let s=()=>{let{videoModels:e}=(0,l.bO)();return{extractVideoModelsForMode:(0,r.useCallback)(t=>{switch(t){case i.s.ADD_EFFECTS:return e.filter(e=>e.supportedEffectsListIds&&e.supportedEffectsListIds.length>0);case i.s.CREATE:case i.s.IMAGE_TO_VIDEO:default:return e}},[e])}}},65304:(e,t,a)=>{a.d(t,{g:()=>r});let r=a(40776).A},73514:(e,t,a)=>{a.d(t,{Y:()=>l,s:()=>i});var r=a(25826);let i={CREATE:"create",IMAGE_TO_VIDEO:"imageToVideo",ADD_EFFECTS:"addEffects"},l=r.Ay$.enum(i)},76375:(e,t,a)=>{a.d(t,{p:()=>r});let r=(0,a(91326).v)(e=>({isDragging:!1,setIsDragging:t=>e({isDragging:t})}))},79274:(e,t,a)=>{a.d(t,{k:()=>l});var r=a(7620),i=a(3397);let l=()=>{let{videoEffects:e}=(0,i.bO)();return{extractVideoEffectsForModel:(0,r.useCallback)(t=>{let a=new Set(t.supportedEffectsListIds);return e.filter(e=>a.has(e.id))},[e])}}},81789:(e,t,a)=>{a.d(t,{S:()=>r});let r={IMAGE_GENERATION_ASYNC:"image-generation-async",IMAGE_GENERATION:"image-generation",IMAGE_UPLOAD:"image-upload",IMAGE_UPSCALE:"image-upscale",DELETE_ASSET:"delete-asset",INFO_CAPTION_IMAGE:"info-caption-image",VIDEO_GENERATION:"video-generation",VIDEO_UPLOAD:"video-upload",TRANSFER_MOTION_GENERATION:"transfer-motion-generation"}},85121:(e,t,a)=>{a.d(t,{z:()=>r});let r=e=>{let{oldAssets:t,placeholderUuid:a,errorCount:r,removeAll:i=!1}=e;if(!0===i)return t.filter(e=>e.settings.metadata.placeholderUuid!==a);let l=r;return t.filter(e=>!(l>0)||e.settings.metadata.placeholderUuid!==a||-1!==e.id||(l--,!1))}},85409:(e,t,a)=>{a.d(t,{Lr:()=>d});var r=a(79536),i=a(10279);let l=r.E$(r.Ik({id:r.Yj(),batchId:r.Yj(),cost:r.ai().optional().default(0)}),i.Kf),s=i.v4,n=r.KC([l,s]),d=r.YO(n)},87552:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(54568),i=a(79649);a(7620);var l=a(11386);let s=(0,a(615).F)("inline-flex items-center justify-center shrink-0 rounded-1.5 px-1.5 py-0.5 text-label-sm font-medium transition-colors **:[svg]:size-3 gap-1",{variants:{variant:{"neutral-subtle":"bg-fill-secondary text-content-secondary aria-disabled:bg-fill-secondary-disabled aria-disabled:text-content-primary-disabled","neutral-over-image":"bg-neutral-black/40 backdrop-blur-[6px] text-content-fixed-inverse aria-disabled:bg-neutral-black/20 aria-disabled:text-content-fixed-inverse-disabled","neutral-strong":"bg-fill-tertiary text-content-secondary aria-disabled:bg-fill-tertiary-disabled aria-disabled:text-content-primary-disabled","ai-over-surface":"bg-fill-brand-secondary text-content-brand aria-disabled:text-content-brand-disabled aria-disabled:bg-fill-brand-secondary-disabled","ai-over-image":"bg-fill-brand/80 backdrop-blur-[3px] text-content-fixed-inverse aria-disabled:bg-fill-brand/40 aria-disabled:text-content-fixed-inverse-disabled",primary:"bg-fill-inverse text-content-primary-inverse aria-disabled:bg-fill-inverse-disabled aria-disabled:text-content-primary-inverse-disabled","outline-success":"bg-surface-success text-content-success aria-disabled:bg-fill-inverse-disabled aria-disabled:text-content-primary-inverse-disabled ring-1 ring-inset ring-border-success/25 aria-disabled:ring-0","outline-warning":"bg-surface-warning text-content-warning aria-disabled:bg-fill-inverse-disabled aria-disabled:text-content-primary-inverse-disabled ring-1 ring-inset ring-border-warning/25 aria-disabled:ring-0","outline-critical":"bg-surface-critical text-content-critical aria-disabled:bg-fill-inverse-disabled aria-disabled:text-content-primary-inverse-disabled ring-1 ring-inset ring-border-critical/25 aria-disabled:ring-0"}},defaultVariants:{variant:"neutral-subtle"}}),n=e=>{let{className:t,variant:a,asChild:n,...d}=e,o=n?i.DX:"span";return(0,r.jsx)(o,{"data-slot":"badge",className:(0,l.cn)(s({variant:a}),t),...d})}},88796:(e,t,a)=>{a.d(t,{CM:()=>o,Ej:()=>l,OM:()=>d,el:()=>n,yM:()=>s});var r=a(6737),i=a(36270);let l={TEXT_TO_IMAGE:"txt2img",IMAGE_TO_IMAGE:"img2img"},s=e=>{let t=(0,r.Bc)(e);return{blobUrl:(0,r.Wc)(t),blob:t}},n=e=>({style_id:e.styleId,aspect_ratio:e.aspectRatio,variation:e.variation,prompt:e.prompt,plugin_name:e.pluginName,is_enhance:void 0===e.isEnhance?void 0:+!!e.isEnhance,enhancer_id:e.enhancerId}),d=(e,t)=>{t.forEach(t=>{e.append("image",t)})},o=e=>{let{images:t,...a}=e,r=n(a),l=(0,i.j)(r);return d(l,t),l}},89536:(e,t,a)=>{a.d(t,{JX:()=>i,Kb:()=>l,OZ:()=>s});var r=a(615);let i=(0,r.F)("group flex w-full items-center justify-between text-left outline-none ring-0 disabled:text-content-primary-disabled ring-inset transition-all duration-500 data-[state=open]:ring-1 data-[state=open]:ring-inverse focus:outline-none disabled:cursor-not-allowed",{variants:{variant:{primary:"bg-fill-primary placeholder-content-secondary hover:bg-fill-primary-hover text-content-primary  disabled:bg-fill-primary-disabled",secondary:"bg-fill-secondary placeholder-content-secondary text-content-primary hover:bg-fill-secondary-hover data-[state=open]:bg-fill-secondary-hover disabled:bg-fill-secondary-disabled","secondary-variant":"bg-fill-secondary-variant placeholder-content-secondary text-content-primary hover:bg-fill-secondary-variant-hover disabled:bg-fill-secondary-variant-disabled"},size:{sm:"h-7 gap-1 px-2 py-1 rounded-2.5 text-label-sm [&_svg]:size-3.5",md:"h-8 gap-1.5 px-2.5 py-1.5 rounded-2.5 text-label-md [&_svg]:size-4",lg:"h-10 gap-2 py-2.5 px-3 rounded-3 text-label-lg [&_svg]:size-4.5",xl:"h-12 gap-2 p-3 rounded-3.5 text-label-xl [&_svg]:size-5"}},defaultVariants:{size:"md",variant:"primary"}}),l=(0,r.F)("z-50 p-2 rounded-4 border text-content-primary shadow-[0px_4px_8px_0px_rgba(176,175,175,0.20)] dark:shadow-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",{variants:{variant:{primary:"bg-surface-primary-variant border-border-primary",secondary:"border-border-elevated bg-surface-elevated"},size:{xs:"text-label-md [&_svg]:size-3.5",sm:"text-label-md [&_svg]:size-4",md:"text-label-lg [&_svg]:size-4.5",lg:"text-label-xl [&_svg]:size-5"}},defaultVariants:{size:"md",variant:"primary"}}),s=(0,r.F)("bg-transparent p-2.5 text-content-primary hover:outline-none relative flex items-center gap-2 **:[span]:flex **:[span]:items-center **:[span]:gap-2 cursor-pointer select-none",{variants:{variant:{primary:"hover:bg-fill-primary-variant-hover active:bg-fill-primary-variant-hover disabled:text-content-primary-disabled disabled:bg-fill-primary-variant-disabled",secondary:"hover:bg-fill-elevated-hover active:bg-fill-elevated-hover disabled:bg-fill-elevated-disabled disabled:text-content-primary-disabled"},size:{xs:"text-label-md rounded-2 py-1 px-2.5 **:[svg]:size-3.5",sm:"text-label-md rounded-2 py-1.5 px-2.5 **:[svg]:size-4",md:"text-label-lg rounded-2.5 p-2.5 **:[svg]:size-4.5",lg:"text-label-xl rounded-2.5 py-3 px-2.5 **:[svg]:size-5"}},defaultVariants:{size:"md",variant:"primary"}})},93107:(e,t,a)=>{a.d(t,{CU:()=>y,K$:()=>A,PC:()=>S,Sn:()=>x,Vy:()=>R});var r=a(54568),i=a(68785),l=a(93343),s=a(79649),n=a(61773),d=a(7620),o=a(20364),u=a(61744),c=a(94363),m=a(73514),p=a(78848),g=a(38727),b=a(25761),v=a(40515),f=a(21517),E=a(45382),I=a(43898),h=a(76375);let y="current-mode",A="current-mode-end-framer",R="current-mode-start-framer",x=e=>{let{children:t,asset:a}=e,l=(0,p.HE)(),{attributes:n,listeners:d,setNodeRef:o}=(0,i.PM)({id:a.uuid,data:a,disabled:!l,attributes:{role:"button",tabIndex:0}});return(0,r.jsx)(s.DX,{...n,...d,ref:o,children:t})},V={draggable:{measure:e=>{if(window.event instanceof MouseEvent){let e=window.scrollY+window.event.clientY-20;return{width:100,height:100,top:e,left:window.scrollX+window.event.clientX-20,right:e+100,bottom:e+100}}let t=e.getBoundingClientRect();return{width:100,height:100,top:t.top,left:t.left,right:t.right,bottom:t.bottom}}}},S=e=>{let{children:t}=e,[a,s]=(0,d.useState)(null),{setIsDragging:x}=(0,h.p)(),S=(0,p.HE)(),{imageGenerationForm:T,videoGenerationForm:_}=(0,b.NT)(),{handleAddImage:O}=(0,v.Y)(),{handleVideoAddImage:M}=(0,E.n)(),{handleImageModeSelect:N}=(0,f.E)(),{handleVideoModeSelect:j}=(0,I.Q)(),w=(0,i.FR)((0,i.MS)(i.AN,{activationConstraint:{distance:5}}));return(0,r.jsxs)(i.Mp,{onDragStart:e=>{e.active.data.current&&(s(e.active.data.current),x(S))},onDragEnd:e=>{var t,r,i,l,n,d,p,b,v,f,E,I;if(x(!1),null==e.over)return;let h=null==(r=e.over)||null==(t=r.data.current)?void 0:t.feature;if(h)switch(h){case c.j.IMAGE:{T.setValue("imageUploadType",g.R.DRAG);let t=T.getValues("mode"),r=t===u.K.CREATE?u.K.EDIT:t,c=e.over.id===y?r:null!=(l=null==(i=e.over.data.current)?void 0:i.mode)?l:r;if(s(null),!c||!a)return;try{let t=u.u.parse(c);switch(N(t,null==(d=e.over)||null==(n=d.data.current)?void 0:n.modelId),a.service){case o.z1.IMAGE:O(a.url.generation,a.url.thumbnail);break;case o.z1.VIDEO:O(a.url.thumbnail,a.url.thumbnail)}}catch(e){}}break;case c.j.VIDEO:{_.setValue("imageUploadType",g.R.DRAG);let t=_.getValues("mode"),r=t===m.s.CREATE?m.s.IMAGE_TO_VIDEO:t,i=e.over.id===R||e.over.id===A?r:null!=(b=null==(p=e.over.data.current)?void 0:p.mode)?b:r;if(s(null),!i||!a)return;try{let t=m.Y.parse(i),r=null==(v=_.getValues("model"))?void 0:v.modelId;switch(j(t,null!=(I=null==(E=e.over)||null==(f=E.data.current)?void 0:f.modelId)?I:r),a.service){case o.z1.IMAGE:M(a.url.generation,a.url.thumbnail,e.over.id===R||e.over.id!==A);break;case o.z1.VIDEO:M(a.url.thumbnail,a.url.thumbnail,e.over.id!==A)}}catch(e){}}}},sensors:w,measuring:V,autoScroll:!1,children:[t,(0,r.jsx)(l.Z,{children:(0,r.jsx)(i.Hd,{dropAnimation:{duration:0},children:a?(0,r.jsx)("div",{className:"bg-surface-primary relative size-25 shrink-0 cursor-grab",children:(0,r.jsx)(n.default,{src:a.url.thumbnail,alt:a.title,fill:!0,className:"object-cover object-center"})}):null})})]})}},94290:(e,t,a)=>{a.d(t,{n:()=>u});var r=a(44089),i=a(57594),l=a(70727),s=a(12753),n=a(48551),d=a(74342),o=a(82832);let u=e=>{if(e instanceof l.U){let t=e.data[0];if(!t)return"";let{message:a}=t;if(e instanceof i.WK)return"Session expired";if(e instanceof n.M8)return"Insufficient credits";if(e instanceof n.X5)return t.message||"Sent request in invalid.";else if(e instanceof s.lh)return"Model deleted by user";else if(e instanceof n.Ll)return"Sorry, the AI Moderator is unsure about this prompt";else if(e instanceof s.B_)return"Service is temporarily unavailable, please try again later";else return a||"Failed to process request"}if(e instanceof d.h)return e.message;if(e instanceof o.P)return e.message;if(e instanceof Error)return e.message;if(e instanceof r.pe)return"An error occurred while processing your request";else return"Processing failed"}},94363:(e,t,a)=>{a.d(t,{j:()=>r});let r={IMAGE:"image",VIDEO:"video"}},97915:(e,t,a)=>{a.d(t,{k:()=>s});var r=a(25761),i=a(79274),l=a(61668);let s=()=>{let{videoGenerationForm:e}=(0,r.NT)(),{extractVideoModelsForMode:t}=(0,l.a)(),{extractVideoEffectsForModel:a}=(0,i.k)();return{handleVideoModelSelect:r=>{let i=t(e.getValues("mode")),l=e.getValues("effect"),s=e.getValues("duration"),n=e.getValues("resolution"),d=e.getValues("aspectRatio"),o=e.getValues("firstFrame"),u=e.getValues("lastFrame"),c=i.find(e=>e.modelId===r);if(!c)return;e.setValue("model",c),c.isLastFrameSupported||e.setValue("lastFrame",void 0);let m=a(c);m.find(e=>e.id===(null==l?void 0:l.id))||e.setValue("effect",m[0]),c.supportedResolutions.includes(null!=n?n:"")||e.setValue("resolution",c.supportedResolutions[0]),c.supportedDurations.includes(null!=s?s:-1)||e.setValue("duration",c.supportedDurations[0]);let p=o||u?c.i2vSupportedAspectRatios:c.t2vSupportedAspectRatios;!p.includes(d)&&p[0]&&e.setValue("aspectRatio",p[0])}}}}}]);